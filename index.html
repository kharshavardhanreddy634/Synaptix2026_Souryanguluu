<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSync - Intelligent Talent Matching</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6, .brand {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        body {
            background: #050505;
            color: #fafafa;
            overflow-x: hidden;
        }
        
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(120, 219, 255, 0.15) 0%, transparent 50%);
            animation: gradientShift 20s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(120, 119, 198, 0.2);
        }
        
        .neon-cyan { box-shadow: 0 0 20px rgba(6, 182, 212, 0.5), 0 0 40px rgba(6, 182, 212, 0.3); }
        .neon-purple { box-shadow: 0 0 20px rgba(168, 85, 247, 0.5), 0 0 40px rgba(168, 85, 247, 0.3); }
        .neon-pink { box-shadow: 0 0 20px rgba(236, 72, 153, 0.5), 0 0 40px rgba(236, 72, 153, 0.3); }
        
        .float { animation: float 6s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .pulse-glow { animation: pulseGlow 3s ease-in-out infinite; }
        @keyframes pulseGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .skill-fill { transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1); }
        
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
        
        .nav-item { position: relative; transition: all 0.3s ease; }
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #06b6d4, #a855f7);
            transition: width 0.3s ease;
        }
        .nav-item.active::after { width: 100%; }
        .nav-item.active { color: #fff; text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
        
        .btn-primary {
            background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover::before { left: 100%; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(6, 182, 212, 0.4); }
        
        .test-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .test-option:hover {
            background: rgba(6, 182, 212, 0.1);
            border-color: rgba(6, 182, 212, 0.3);
        }
        .test-option.selected {
            background: rgba(6, 182, 212, 0.2);
            border-color: #06b6d4;
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
        }
        .test-option.correct { background: rgba(16, 185, 129, 0.2); border-color: #10b981; }
        .test-option.incorrect { background: rgba(239, 68, 68, 0.2); border-color: #ef4444; }
        
        .timer-warning { animation: timerPulse 1s infinite; }
        @keyframes timerPulse {
            0%, 100% { color: #ef4444; }
            50% { color: #fbbf24; }
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .stream-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .stream-card:hover { transform: translateY(-5px); border-color: rgba(6, 182, 212, 0.5); }
        .stream-card.selected {
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.1);
            box-shadow: 0 0 30px rgba(6, 182, 212, 0.3);
        }
        
        .otp-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: white;
            border-radius: 12px;
            transition: all 0.3s;
        }
        .otp-input:focus {
            border-color: #06b6d4;
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
            outline: none;
        }
        
        .rank-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }
        
        .opportunity-card {
            transition: all 0.3s ease;
        }
        .opportunity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(6, 182, 212, 0.2);
        }
        
        .typing-effect::after {
            content: '|';
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        .file-upload-zone {
            border: 2px dashed rgba(255,255,255,0.2);
            transition: all 0.3s;
        }
        .file-upload-zone:hover, .file-upload-zone.dragover {
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.05);
        }
        
        .difficulty-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: 600;
        }
        .difficulty-medium { background: rgba(251, 191, 36, 0.2); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.3); }
        .difficulty-hard { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
        .difficulty-expert { background: rgba(168, 85, 247, 0.2); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.3); }
    </style>
</head>
<body class="antialiased">
    <div class="gradient-bg"></div>

    <!-- Auth Modal (First Time User) -->
    <div id="auth-modal" class="fixed inset-0 z-[100] flex items-center justify-center">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl"></div>
        <div class="relative w-full max-w-md p-8">
            <div class="glass-card rounded-3xl p-8 border border-white/10">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center neon-cyan">
                        <i class="fas fa-atom text-white text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-2">Welcome to SkillSync</h2>
                    <p class="text-gray-400 text-sm">Unlock your potential with AI-powered matching</p>
                </div>

                <!-- Step 1: Basic Info -->
                <div id="auth-step-1" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Full Name</label>
                        <input type="text" id="user-name" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="Enter your full name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Email Address</label>
                        <input type="email" id="user-email" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Mobile Number</label>
                        <div class="flex gap-2">
                            <span class="px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-400 flex items-center">+91</span>
                            <input type="tel" id="user-mobile" class="flex-1 px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="9876543210" maxlength="10">
                        </div>
                    </div>
                    <button onclick="sendOTP()" class="w-full btn-primary py-3 rounded-xl text-white font-semibold mt-6">
                        Send OTP
                    </button>
                </div>

                <!-- Step 2: OTP Verification -->
                <div id="auth-step-2" class="hidden space-y-6">
                    <div class="text-center">
                        <p class="text-gray-400 text-sm mb-2">Enter OTP sent to <span id="otp-phone" class="text-cyan-400"></span></p>
                        <div class="flex justify-center gap-3">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 0)" onkeydown="handleOTPKeydown(event, 0)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 1)" onkeydown="handleOTPKeydown(event, 1)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 2)" onkeydown="handleOTPKeydown(event, 2)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 3)" onkeydown="handleOTPKeydown(event, 3)">
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-500">Didn't receive? <button onclick="resendOTP()" class="text-cyan-400 hover:text-cyan-300 font-medium">Resend</button></p>
                    </div>
                    <button onclick="verifyOTP()" class="w-full btn-primary py-3 rounded-xl text-white font-semibold">
                        Verify & Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Onboarding Flow (Post-Login) -->
    <div id="onboarding-flow" class="hidden fixed inset-0 z-[90] overflow-y-auto">
        <div class="min-h-screen px-6 py-12 flex flex-col items-center justify-center">
            
            <!-- Step 1: Welcome & Resume Upload -->
            <div id="onboard-step-1" class="w-full max-w-2xl">
                <div class="text-center mb-12">
                    <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-amber-400/20 to-orange-600/20 flex items-center justify-center float">
                        <i class="fas fa-rocket text-4xl text-amber-400"></i>
                    </div>
                    <h2 class="text-4xl font-bold text-white mb-4">Let's Get Started!</h2>
                    <p class="text-xl text-gray-400">Take a test to discover your score and unlock job opportunities</p>
                </div>

                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <i class="fas fa-cloud-upload-alt text-cyan-400"></i>
                        Upload Your Resume
                    </h3>
                    <div id="upload-zone" class="file-upload-zone rounded-2xl p-12 text-center cursor-pointer" onclick="document.getElementById('resume-input').click()" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <input type="file" id="resume-input" class="hidden" accept=".pdf,.doc,.docx" onchange="handleFileSelect(event)">
                        <div id="upload-content">
                            <i class="fas fa-file-upload text-5xl text-gray-500 mb-4"></i>
                            <p class="text-lg text-white font-medium mb-2">Drop your resume here</p>
                            <p class="text-sm text-gray-500">or click to browse (PDF, DOC, DOCX)</p>
                        </div>
                        <div id="upload-success" class="hidden">
                            <i class="fas fa-check-circle text-5xl text-emerald-400 mb-4"></i>
                            <p class="text-lg text-white font-medium" id="filename-display">resume.pdf</p>
                            <button onclick="event.stopPropagation(); resetUpload()" class="mt-2 text-sm text-cyan-400 hover:text-cyan-300">Change file</button>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="goToStep2()" id="continue-btn" class="btn-primary px-12 py-4 rounded-xl text-white font-bold text-lg opacity-50 cursor-not-allowed" disabled>
                        Continue <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Stream Selection -->
            <div id="onboard-step-2" class="w-full max-w-6xl hidden">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold text-white mb-4">Select Your Stream</h2>
                    <p class="text-xl text-gray-400">Choose your field to get a personalized assessment</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12" id="streams-grid">
                    <!-- Streams populated by JS -->
                </div>

                <div id="path-selection" class="hidden glass-card rounded-3xl p-8 mb-8">
                    <h3 class="text-xl font-bold text-white mb-6">Select Assessment Path</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="paths-grid">
                        <!-- Paths populated by JS -->
                    </div>
                </div>

                <div class="flex justify-between">
                    <button onclick="goToStep1()" class="px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-medium transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i> Back
                    </button>
                    <button onclick="startAssessment()" id="start-test-btn" class="btn-primary px-8 py-3 rounded-xl text-white font-bold opacity-50 cursor-not-allowed" disabled>
                        Start Test <i class="fas fa-play ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Interface -->
    <div id="test-interface" class="hidden fixed inset-0 z-[80] bg-[#0a0a0a]">
        <!-- Test Header -->
        <div class="glass-card border-b border-white/10 px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center">
                    <i class="fas fa-atom text-white"></i>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white" id="test-title">Technical Assessment</h3>
                    <p class="text-xs text-gray-400" id="test-subtitle">Computer Science & Programming</p>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10">
                    <i class="fas fa-clock text-cyan-400"></i>
                    <span id="test-timer" class="font-mono text-lg font-bold text-cyan-400">45:00</span>
                </div>
                <button onclick="confirmExitTest()" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Progress -->
        <div class="w-full h-1 bg-white/10">
            <div id="test-progress" class="h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-300" style="width: 0%"></div>
        </div>

        <!-- Test Content -->
        <div class="flex h-[calc(100vh-81px)]">
            <!-- Sidebar -->
            <div class="w-64 glass-card border-r border-white/10 p-4 overflow-y-auto hidden md:block">
                <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4">Questions</p>
                <div id="question-nav" class="grid grid-cols-5 gap-2">
                    <!-- Question numbers -->
                </div>
                
                <div class="mt-6 pt-6 border-t border-white/10">
                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Legend</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-cyan-500"></div><span class="text-gray-400">Answered</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-white/20"></div><span class="text-gray-400">Unanswered</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-amber-500"></div><span class="text-gray-400">Current</span></div>
                    </div>
                </div>

                <div class="mt-6">
                    <button onclick="submitTest()" class="w-full py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white font-semibold hover:shadow-lg transition-all">
                        Submit Test
                    </button>
                </div>
            </div>

            <!-- Main Question Area -->
            <div class="flex-1 overflow-y-auto p-6 md:p-12">
                <div id="question-container" class="max-w-4xl mx-auto">
                    <!-- Questions rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Results Page -->
    <div id="results-page" class="hidden min-h-screen pt-24 pb-12 px-6">
        <div class="max-w-6xl mx-auto">
            <!-- Score Hero -->
            <div class="glass-card rounded-3xl p-12 mb-8 text-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-cyan-500/10 to-purple-500/10"></div>
                <div class="relative z-10">
                    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-500/30 mb-6">
                        <i class="fas fa-check-circle text-emerald-400"></i>
                        <span class="text-emerald-400 font-medium">Test Completed Successfully</span>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center gap-12 mb-8">
                        <div class="relative">
                            <svg class="w-48 h-48 transform -rotate-90">
                                <circle cx="96" cy="96" r="88" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="12"/>
                                <circle id="score-ring" cx="96" cy="96" r="88" fill="none" stroke="url(#scoreGradient)" stroke-width="12" 
                                        stroke-dasharray="552.9" stroke-dashoffset="552.9" stroke-linecap="round" class="progress-ring-circle"/>
                                <defs>
                                    <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#06b6d4" />
                                        <stop offset="100%" stop-color="#a855f7" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span id="final-score" class="text-6xl font-bold text-white">0%</span>
                                <span class="text-gray-400 text-sm mt-1">Score</span>
                            </div>
                        </div>
                        
                        <div class="text-left">
                            <div class="rank-badge inline-flex items-center gap-2 px-6 py-3 rounded-2xl mb-4">
                                <i class="fas fa-trophy text-amber-900"></i>
                                <span class="text-amber-900 font-bold text-lg">Rank #<span id="user-rank">--</span></span>
                            </div>
                            <h2 id="result-title" class="text-3xl font-bold text-white mb-2">Outstanding Performance!</h2>
                            <p id="result-message" class="text-gray-400 max-w-md">You've demonstrated exceptional skills. Check out your personalized job opportunities below.</p>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
                        <div class="glass-card rounded-xl p-4">
                            <div class="text-2xl font-bold text-cyan-400" id="mcq-score">0/0</div>
                            <div class="text-xs text-gray-500 uppercase">MCQ Correct</div>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <div class="text-2xl font-bold text-purple-400" id="coding-score">0/0</div>
                            <div class="text-xs text-gray-500 uppercase">Coding Passed</div>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <div class="text-2xl font-bold text-emerald-400" id="accuracy">0%</div>
                            <div class="text-xs text-gray-500 uppercase">Accuracy</div>
                        </div>
                        <div class="glass-card rounded-xl p-4">
                            <div class="text-2xl font-bold text-pink-400" id="percentile">0th</div>
                            <div class="text-xs text-gray-500 uppercase">Percentile</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Opportunities Section -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                    <i class="fas fa-briefcase text-cyan-400"></i>
                    Recommended Opportunities
                </h3>
                <div id="opportunities-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Opportunities populated by JS -->
                </div>
            </div>

            <!-- Detailed Breakdown -->
            <div class="glass-card rounded-3xl p-8 mb-8">
                <h3 class="text-xl font-bold text-white mb-6">Detailed Analysis</h3>
                <div id="detailed-breakdown" class="space-y-4">
                    <!-- Breakdown populated by JS -->
                </div>
            </div>

            <div class="flex justify-center gap-4">
                <button onclick="retakeTest()" class="px-8 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-white font-semibold transition-all">
                    <i class="fas fa-redo mr-2"></i> Retake Test
                </button>
                <button onclick="enterMainApp()" class="btn-primary px-8 py-3 rounded-xl text-white font-bold">
                    Explore Dashboard <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main App (Original SkillSync) -->
    <div id="main-app" class="hidden">
        <nav class="fixed top-0 w-full z-50 px-6 py-4">
            <div class="max-w-7xl mx-auto glass-card rounded-2xl px-6 py-3 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center neon-cyan">
                        <i class="fas fa-atom text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold tracking-tight text-white">SkillSync</h1>
                        <p class="text-xs text-gray-400 tracking-wider">AI-POWERED MATCHING</p>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center gap-8">
                    <button onclick="switchView('match')" class="nav-item active text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-match">Matching</button>
                    <button onclick="switchView('candidates')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-candidates">Talent Pool</button>
                    <button onclick="switchView('projects')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-projects">Projects</button>
                    <button onclick="switchView('analytics')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-analytics">Analytics</button>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
                        <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></div>
                        <span class="text-xs font-medium text-emerald-400">Fairness Active</span>
                    </div>
                    <button class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors border border-white/10">
                        <i class="fas fa-bell text-gray-400"></i>
                    </button>
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm" id="user-avatar">
                        ME
                    </div>
                </div>
            </div>
        </nav>

        <main class="pt-28 pb-12 px-6 max-w-7xl mx-auto">
            <div class="mb-10 text-center relative">
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl -z-10"></div>
                <h2 class="text-5xl font-bold mb-4 bg-gradient-to-r from-white via-cyan-200 to-purple-200 bg-clip-text text-transparent">
                    Intelligent Matching
                </h2>
                <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                    Transparent, weighted competency scoring with bias mitigation and explainable AI
                </p>
            </div>

            <!-- Views -->
            <div id="view-match" class="space-y-6">
                <div class="glass-card rounded-2xl p-4 flex flex-wrap items-center justify-between gap-4">
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <select id="project-select" onchange="changeProject(this.value)" class="appearance-none bg-black/30 border border-white/10 rounded-xl px-5 py-3 pr-12 text-white focus:outline-none focus:border-cyan-500/50 min-w-[300px]"></select>
                            <i class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                        <button onclick="openWeightsModal()" class="px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-sm font-medium transition-all flex items-center gap-2">
                            <i class="fas fa-sliders-h text-cyan-400"></i> Adjust Weights
                        </button>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-sm text-gray-400">Sort by:</span>
                        <div class="flex bg-black/30 rounded-lg p-1 border border-white/10">
                            <button onclick="sortMatches('score')" class="sort-btn active px-4 py-1.5 rounded-md text-sm font-medium transition-all bg-white/10 text-white" data-sort="score">Match Score</button>
                            <button onclick="sortMatches('fairness')" class="sort-btn px-4 py-1.5 rounded-md text-sm font-medium text-gray-400 hover:text-white transition-all" data-sort="fairness">Fairness</button>
                            <button onclick="sortMatches('diversity')" class="sort-btn px-4 py-1.5 rounded-md text-sm font-medium text-gray-400 hover:text-white transition-all" data-sort="diversity">Diversity</button>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <div class="lg:col-span-7 space-y-4" id="candidates-list"></div>
                    <div class="lg:col-span-5">
                        <div class="sticky top-28 space-y-4">
                            <div id="detail-panel" class="glass-card rounded-2xl p-6 hidden"></div>
                            <div id="empty-state" class="glass-card rounded-2xl p-12 text-center">
                                <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-white/5 flex items-center justify-center">
                                    <i class="fas fa-user-astronaut text-4xl text-gray-600"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-white mb-2">Select a Candidate</h3>
                                <p class="text-gray-400">Click on any candidate to view detailed matching analysis.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-candidates" class="hidden space-y-6">
                <div class="glass-card rounded-2xl p-8">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h3 class="text-2xl font-bold text-white mb-1">Talent Pool</h3>
                            <p class="text-gray-400">Browse all candidates and their competency profiles</p>
                        </div>
                    </div>
                    <div id="candidates-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
            </div>

            <div id="view-projects" class="hidden space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="projects-grid"></div>
            </div>

            <div id="view-analytics" class="hidden space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="glass-card rounded-2xl p-6 text-center">
                        <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2">94.2%</div>
                        <p class="text-gray-400">Average Match Quality</p>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center">
                        <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-2">0.89</div>
                        <p class="text-gray-400">Fairness Index</p>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center">
                        <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 mb-2">2.1s</div>
                        <p class="text-gray-400">Avg Processing Time</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Weights Modal -->
    <div id="weights-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeWeightsModal()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg">
            <div class="glass-card rounded-3xl p-8 border border-white/20">
                <h3 class="text-2xl font-bold text-white mb-8">Adjust Scoring Weights</h3>
                <div class="space-y-8" id="weights-container"></div>
                <div class="mt-8 pt-6 border-t border-white/10 flex justify-end gap-3">
                    <button onclick="resetWeights()" class="px-6 py-3 rounded-xl text-gray-400 hover:text-white transition-colors">Reset</button>
                    <button onclick="applyWeights()" class="btn-primary px-6 py-3 rounded-xl text-white font-semibold">Apply Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Structures
        const streams = [
            {
                id: 'cs',
                name: 'Computer Science & Programming',
                icon: 'fa-laptop-code',
                color: 'from-cyan-400 to-blue-600',
                hasCoding: true,
                paths: [
                    { id: 'software-dev', name: 'Software Development', desc: 'Web, Mobile & Application Development' },
                    { id: 'data-science', name: 'Data Science & ML', desc: 'Machine Learning, AI & Analytics' },
                    { id: 'systems', name: 'Systems & Infrastructure', desc: 'DevOps, Cloud & Distributed Systems' }
                ]
            },
            {
                id: 'electronics',
                name: 'Electronics & Communication',
                icon: 'fa-microchip',
                color: 'from-purple-400 to-pink-600',
                hasCoding: false,
                paths: [
                    { id: 'vlsi', name: 'VLSI Design', desc: 'Chip Design & Semiconductor Technology' },
                    { id: 'embedded', name: 'Embedded Systems', desc: 'IoT, Robotics & Automation' },
                    { id: 'telecom', name: 'Telecommunications', desc: '5G, Network Engineering & Wireless' }
                ]
            },
            {
                id: 'mechanical',
                name: 'Mechanical Engineering',
                icon: 'fa-cogs',
                color: 'from-amber-400 to-orange-600',
                hasCoding: false,
                paths: [
                    { id: 'design', name: 'Product Design', desc: 'CAD, CAM & Industrial Design' },
                    { id: 'manufacturing', name: 'Manufacturing', desc: 'Production, Quality & Operations' },
                    { id: 'thermal', name: 'Thermal & Fluids', desc: 'HVAC, Automotive & Aerospace' }
                ]
            },
            {
                id: 'civil',
                name: 'Civil Engineering',
                icon: 'fa-building',
                color: 'from-emerald-400 to-teal-600',
                hasCoding: false,
                paths: [
                    { id: 'structural', name: 'Structural Engineering', desc: 'Buildings, Bridges & Infrastructure' },
                    { id: 'construction', name: 'Construction Management', desc: 'Project Planning & Execution' },
                    { id: 'environmental', name: 'Environmental', desc: 'Sustainable & Green Engineering' }
                ]
            },
            {
                id: 'business',
                name: 'Business & Management',
                icon: 'fa-chart-line',
                color: 'from-rose-400 to-red-600',
                hasCoding: false,
                paths: [
                    { id: 'marketing', name: 'Marketing & Sales', desc: 'Digital Marketing & Business Development' },
                    { id: 'finance', name: 'Finance & Consulting', desc: 'Investment Banking & Strategy' },
                    { id: 'hr', name: 'HR & Operations', desc: 'Talent Management & Operations' }
                ]
            },
            {
                id: 'design',
                name: 'Design & Creative',
                icon: 'fa-palette',
                color: 'from-indigo-400 to-purple-600',
                hasCoding: false,
                paths: [
                    { id: 'uiux', name: 'UI/UX Design', desc: 'User Experience & Interface Design' },
                    { id: 'graphic', name: 'Graphic Design', desc: 'Visual Design & Branding' },
                    { id: 'motion', name: 'Motion & Animation', desc: 'Video, Animation & 3D Design' }
                ]
            }
        ];

        // Question Banks by Stream & Path
        const questionBanks = {
            'cs-software-dev': {
                mcqs: [
                    { id: 1, question: "Explain the difference between synchronous and asynchronous programming in JavaScript, including event loop mechanics and when to use each approach.", options: ["Sync blocks thread, async uses callbacks", "Sync is faster, async is slower", "Sync uses single thread, async uses multiple threads", "Sync executes sequentially, async uses event loop for non-blocking operations"], correct: 3, difficulty: 'hard', category: 'JavaScript' },
                    { id: 2, question: "In a distributed system, how would you handle the Byzantine Generals Problem when consensus is required across nodes with potential failures?", options: ["Use TCP only", "Implement PBFT or Raft consensus", "Increase timeout values", "Use UDP broadcasting"], correct: 1, difficulty: 'expert', category: 'Distributed Systems' },
                    { id: 3, question: "What is the time and space complexity of the Floyd-Warshall algorithm, and in what scenarios is it preferred over Dijkstra's algorithm?", options: ["O(V²) time, O(V²) space; preferred for sparse graphs", "O(V³) time, O(V²) space; preferred for all-pairs shortest path", "O(E log V) time; preferred for dense graphs", "O(V!) time; preferred for small graphs"], correct: 1, difficulty: 'hard', category: 'Algorithms' },
                    { id: 4, question: "How does a B-Tree differ from a Binary Search Tree in terms of node structure, and why are B-Trees preferred for database indexing?", options: ["B-Trees have more children, better for disk I/O", "B-Trees are binary, BSTs are not", "BSTs are faster for all operations", "No significant difference"], correct: 0, difficulty: 'hard', category: 'Data Structures' },
                    { id: 5, question: "Explain the CAP theorem and its implications for designing a globally distributed database system.", options: ["Consistency, Availability, Partition tolerance - pick two", "Computer, Application, Protocol", "Cache, API, Performance", "Concurrent, Atomic, Persistent"], correct: 0, difficulty: 'hard', category: 'System Design' },
                    { id: 6, question: "What are the memory visibility guarantees provided by the 'volatile' keyword in Java, and how does it interact with the Java Memory Model?", options: ["Prevents caching in registers only", "Ensures atomicity of compound operations", "Guarantees visibility across threads, prevents instruction reordering", "Makes variables immutable"], correct: 2, difficulty: 'expert', category: 'Java' },
                    { id: 7, question: "In React, explain the difference between useEffect and useLayoutEffect, including when DOM mutations are safe in each.", options: ["useEffect runs after paint, useLayoutEffect before", "useLayoutEffect is deprecated", "useEffect is for state only", "No difference in timing"], correct: 0, difficulty: 'hard', category: 'React' },
                    { id: 8, question: "How would you design a rate limiter that handles millions of requests per second with distributed architecture?", options: ["Token bucket in single Redis instance", "Sliding window log with consistent hashing", "Fixed window counter only", "Client-side throttling only"], correct: 1, difficulty: 'expert', category: 'System Design' },
                    { id: 9, question: "What is the difference between database normalization and denormalization, and when would you intentionally denormalize?", options: ["Normalization reduces redundancy; denormalize for read performance", "Denormalization removes all constraints", "Normalization is only for SQL", "Denormalization improves write speed always"], correct: 0, difficulty: 'hard', category: 'Databases' },
                    { id: 10, question: "Explain how WebAssembly achieves near-native performance and its security model compared to JavaScript.", options: ["Compiled binary format, sandboxed execution environment", "Just-in-time compilation only", "Runs directly on CPU without sandbox", "Interpreted like JavaScript"], correct: 0, difficulty: 'expert', category: 'Web Technologies' }
                ],
                coding: [
                    { id: 1, title: "LRU Cache Implementation", description: "Design and implement a Least Recently Used (LRU) cache with O(1) get and put operations. Handle edge cases including capacity constraints and concurrent access.", difficulty: 'hard', template: "class LRUCache {\n    constructor(capacity) {\n        // Initialize your cache structure here\n    }\n    \n    get(key) {\n        // Return value or -1\n    }\n    \n    put(key, value) {\n        // Update value or insert\n    }\n}" },
                    { id: 2, title: "Merge K Sorted Arrays", description: "Given k sorted arrays, merge them into a single sorted array. Optimize for both time and space complexity.", difficulty: 'hard', template: "function mergeKSortedArrays(arrays) {\n    // Your implementation here\n    return [];\n}" }
                ]
            },
            'cs-data-science': {
                mcqs: [
                    { id: 1, question: "Explain the bias-variance decomposition and how it relates to model complexity in gradient boosting machines.", options: ["Trade-off between underfitting and overfitting", "Only affects neural networks", "Refers to data preprocessing", "Memory vs speed trade-off"], correct: 0, difficulty: 'hard', category: 'ML Theory' },
                    { id: 2, question: "How does backpropagation handle vanishing gradients in deep networks, and what are modern solutions?", options: ["Residual connections, batch normalization, careful initialization", "Simply add more layers", "Use smaller learning rates only", "Vanishing gradients don't exist in modern networks"], correct: 0, difficulty: 'expert', category: 'Deep Learning' },
                    { id: 3, question: "What is the difference between batch gradient descent, stochastic gradient descent, and mini-batch gradient descent in terms of convergence properties?", options: ["Batch uses full dataset, SGD is noisy but escapes local minima, mini-batch balances both", "SGD is always better", "Batch is faster per iteration", "No difference in final convergence"], correct: 0, difficulty: 'hard', category: 'Optimization' },
                    { id: 4, question: "Explain how transformer attention mechanisms differ from RNNs in handling long-range dependencies.", options: ["Self-attention provides direct connections, parallelizable", "RNNs are better for long sequences", "Transformers use less memory", "RNNs are parallelizable"], correct: 0, difficulty: 'hard', category: 'NLP' },
                    { id: 5, question: "In statistical hypothesis testing, explain the difference between Type I and Type II errors and how to control them.", options: ["False positive vs false negative; controlled by significance level and power", "Both are the same", "Type I is worse always", "Controlled only by sample size"], correct: 0, difficulty: 'hard', category: 'Statistics' },
                    { id: 6, question: "How would you handle imbalanced datasets in a classification problem with 99:1 class distribution?", options: ["SMOTE, class weights, ensemble methods, or appropriate metrics", "Just accuracy metric", "Remove majority class samples", "Imbalance doesn't affect modern algorithms"], correct: 0, difficulty: 'hard', category: 'Data Processing' },
                    { id: 7, question: "What is the kernel trick in SVMs and how does it enable non-linear classification?", options: ["Maps to higher dimensional space implicitly", "Adds more features manually", "Uses neural networks", "Reduces dimensionality"], correct: 0, difficulty: 'hard', category: 'ML Algorithms' },
                    { id: 8, question: "Explain the difference between generative and discriminative models with examples.", options: ["Generative models joint distribution P(X,Y), discriminative conditional P(Y|X)", "Discriminative is always better", "Generative requires less data always", "No practical difference"], correct: 0, difficulty: 'hard', category: 'ML Theory' },
                    { id: 9, question: "How does gradient checkpointing reduce memory usage in training large neural networks?", options: ["Recomputes activations during backward pass", "Reduces batch size", "Uses smaller model", "Compresses gradients"], correct: 0, difficulty: 'expert', category: 'Deep Learning' },
                    { id: 10, question: "What are the assumptions of linear regression and how would you verify them?", options: ["Linearity, independence, homoscedasticity, normality; residual analysis", "No assumptions needed", "Only normality matters", "Only linearity matters"], correct: 0, difficulty: 'hard', category: 'Statistics' }
                ],
                coding: [
                    { id: 1, title: "Implement Gradient Descent from Scratch", description: "Implement linear regression using gradient descent without using scikit-learn. Include feature normalization and learning rate scheduling.", difficulty: 'hard', template: "import numpy as np\n\nclass LinearRegressionGD:\n    def __init__(self, learning_rate=0.01, epochs=1000):\n        self.lr = learning_rate\n        self.epochs = epochs\n    \n    def fit(self, X, y):\n        # Implement gradient descent\n        pass\n    \n    def predict(self, X):\n        # Return predictions\n        pass" },
                    { id: 2, title: "K-Means Clustering", description: "Implement the K-Means clustering algorithm from scratch. Include K-means++ initialization and handle empty clusters.", difficulty: 'hard', template: "import numpy as np\n\nclass KMeans:\n    def __init__(self, k=3, max_iters=100):\n        self.k = k\n        self.max_iters = max_iters\n    \n    def fit(self, X):\n        # Implement K-means\n        pass\n    \n    def predict(self, X):\n        # Return cluster assignments\n        pass" }
                ]
            },
            'electronics-vlsi': {
                mcqs: [
                    { id: 1, question: "Explain the differences between synchronous and asynchronous reset in flip-flops regarding metastability and routing.", options: ["Sync reset is clocked, async is immediate; async harder to verify", "Async is always better", "Sync uses more power", "No difference in timing"], correct: 0, difficulty: 'hard', category: 'Digital Design' },
                    { id: 2, question: "How does clock gating reduce power consumption in CMOS circuits, and what are the timing considerations?", options: ["Stops clock to idle logic; requires enable setup time", "Reduces voltage", "Increases frequency", "Only affects dynamic power"], correct: 0, difficulty: 'hard', category: 'Low Power Design' },
                    { id: 3, question: "What is the difference between setup time and hold time violations, and how are they fixed?", options: ["Setup: data before clock; Hold: data after clock; fixed by buffering or retiming", "Both are the same", "Only setup matters", "Fixed by increasing voltage"], correct: 0, difficulty: 'hard', category: 'Timing Analysis' },
                    { id: 4, question: "Explain the working principle of a Phase-Locked Loop (PLL) and its applications in SoC design.", options: ["Feedback system locking output phase to reference; used for clock generation", "Amplifier circuit", "Power regulator", "Memory controller"], correct: 0, difficulty: 'hard', category: 'Analog Design' },
                    { id: 5, question: "What are the trade-offs between FinFET and planar CMOS technology nodes?", options: ["FinFET better control, lower leakage, higher drive current", "Planar is always better", "FinFET is cheaper", "No significant difference"], correct: 0, difficulty: 'expert', category: 'Semiconductor Physics' },
                    { id: 6, question: "How does static timing analysis (STA) differ from dynamic simulation in verifying digital circuits?", options: ["STA checks all corners without vectors, simulation needs testbenches", "Simulation is faster", "STA finds all bugs", "Simulation doesn't need vectors"], correct: 0, difficulty: 'hard', category: 'Verification' },
                    { id: 7, question: "Explain clock domain crossing (CDC) challenges and synchronization techniques.", options: ["Metastability, data loss; use FIFOs, handshake, or synchronizers", "Not a real problem", "Solved by faster clocks", "Only affects power"], correct: 0, difficulty: 'hard', category: 'Design' },
                    { id: 8, question: "What is the difference between SRAM and DRAM in terms of cell structure, speed, and applications?", options: ["SRAM: 6T, faster, cache; DRAM: 1T+Cap, dense, main memory", "DRAM is faster", "SRAM is denser", "Same structure"], correct: 0, difficulty: 'medium', category: 'Memory' },
                    { id: 9, question: "How do you optimize a critical path in a digital circuit when synthesis reports negative slack?", options: ["Pipeline, retime, upsize cells, or change architecture", "Increase clock period only", "Add more buffers always", "Reduce voltage"], correct: 0, difficulty: 'hard', category: 'Physical Design' },
                    { id: 10, question: "Explain electromigration and its impact on interconnect reliability in advanced nodes.", options: ["Electron momentum displaces atoms; limits current density", "Only affects transistors", "Thermal effect only", "Not relevant below 7nm"], correct: 0, difficulty: 'expert', category: 'Reliability' }
                ],
                coding: []
            }
        };

        // Opportunities Database
        const opportunities = [
            { id: 1, title: "Senior Software Engineer", company: "Google", type: "Full-time", location: "Bangalore", salary: "₹45-65 LPA", requirements: { minScore: 85, rank: 100 }, tags: ["Java", "System Design", "Cloud"], match: 95 },
            { id: 2, title: "ML Engineer", company: "Microsoft", type: "Full-time", location: "Hyderabad", salary: "₹40-60 LPA", requirements: { minScore: 80, rank: 200 }, tags: ["Python", "TensorFlow", "Deep Learning"], match: 92 },
            { id: 3, title: "Product Manager", company: "Flipkart", type: "Full-time", location: "Bangalore", salary: "₹35-50 LPA", requirements: { minScore: 75, rank: 300 }, tags: ["Strategy", "Analytics", "Leadership"], match: 88 },
            { id: 4, title: "Data Science Intern", company: "Amazon", type: "Internship", location: "Remote", salary: "₹60K/month", requirements: { minScore: 70, rank: 500 }, tags: ["SQL", "Python", "Statistics"], match: 85 },
            { id: 5, title: "Frontend Developer", company: "Swiggy", type: "Full-time", location: "Bangalore", salary: "₹25-40 LPA", requirements: { minScore: 75, rank: 400 }, tags: ["React", "JavaScript", "CSS"], match: 90 },
            { id: 6, title: "DevOps Engineer", company: "Netflix", type: "Full-time", location: "Mumbai", salary: "₹30-45 LPA", requirements: { minScore: 80, rank: 250 }, tags: ["AWS", "Kubernetes", "CI/CD"], match: 87 },
            { id: 7, title: "Research Intern", company: "Adobe", type: "Internship", location: "Noida", salary: "₹50K/month", requirements: { minScore: 65, rank: 800 }, tags: ["Computer Vision", "Python", "Research"], match: 82 },
            { id: 8, title: "Full Stack Developer", company: "Paytm", type: "Full-time", location: "Delhi", salary: "₹20-35 LPA", requirements: { minScore: 60, rank: 1000 }, tags: ["Node.js", "MongoDB", "React"], match: 78 }
        ];

        // Global State
        let currentUser = null;
        let selectedStream = null;
        let selectedPath = null;
        let currentTest = null;
        let testState = {
            currentQuestion: 0,
            answers: {},
            codingAnswers: {},
            timeRemaining: 2700,
            timerInterval: null
        };

        // Initialize
        function init() {
            renderStreams();
            initMonacoEditor();
        }

        // Monaco Editor Initialization
        function initMonacoEditor() {
            require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' }});
        }

        // Auth Functions
        function sendOTP() {
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const mobile = document.getElementById('user-mobile').value;

            if (!name || !email || !mobile || mobile.length !== 10) {
                alert('Please fill all fields correctly');
                return;
            }

            currentUser = { name, email, mobile };
            document.getElementById('otp-phone').textContent = '+91 ' + mobile;
            document.getElementById('auth-step-1').classList.add('hidden');
            document.getElementById('auth-step-2').classList.remove('hidden');
            
            // Simulate OTP sent
            setTimeout(() => {
                alert('OTP sent to ' + mobile + ' (Demo: Enter 1234)');
            }, 500);
        }

        function handleOTPInput(input, index) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value && index < 3) {
                document.querySelectorAll('.otp-input')[index + 1].focus();
            }
        }

        function handleOTPKeydown(e, index) {
            if (e.key === 'Backspace' && !e.target.value && index > 0) {
                document.querySelectorAll('.otp-input')[index - 1].focus();
            }
        }

        function resendOTP() {
            alert('OTP resent to ' + currentUser.mobile);
        }

        function verifyOTP() {
            const otp = Array.from(document.querySelectorAll('.otp-input')).map(i => i.value).join('');
            if (otp === '1234' || otp.length === 4) {
                document.getElementById('auth-modal').classList.add('hidden');
                document.getElementById('onboarding-flow').classList.remove('hidden');
                document.getElementById('user-avatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            } else {
                alert('Invalid OTP. Try 1234 for demo.');
            }
        }

        // Resume Upload
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length) processFile(files[0]);
        }

        function handleFileSelect(e) {
            if (e.target.files.length) processFile(e.target.files[0]);
        }

        function processFile(file) {
            if (!file.name.match(/\.(pdf|doc|docx)$/i)) {
                alert('Please upload PDF, DOC, or DOCX files only');
                return;
            }
            document.getElementById('upload-content').classList.add('hidden');
            document.getElementById('upload-success').classList.remove('hidden');
            document.getElementById('filename-display').textContent = file.name;
            document.getElementById('continue-btn').disabled = false;
            document.getElementById('continue-btn').classList.remove('opacity-50', 'cursor-not-allowed');
        }

        function resetUpload() {
            document.getElementById('upload-content').classList.remove('hidden');
            document.getElementById('upload-success').classList.add('hidden');
            document.getElementById('resume-input').value = '';
            document.getElementById('continue-btn').disabled = true;
            document.getElementById('continue-btn').classList.add('opacity-50', 'cursor-not-allowed');
        }

        // Navigation
        function goToStep2() {
            document.getElementById('onboard-step-1').classList.add('hidden');
            document.getElementById('onboard-step-2').classList.remove('hidden');
        }

        function goToStep1() {
            document.getElementById('onboard-step-2').classList.add('hidden');
            document.getElementById('onboard-step-1').classList.remove('hidden');
            document.getElementById('path-selection').classList.add('hidden');
            document.getElementById('start-test-btn').disabled = true;
            document.getElementById('start-test-btn').classList.add('opacity-50', 'cursor-not-allowed');
            selectedStream = null;
            selectedPath = null;
            document.querySelectorAll('.stream-card').forEach(c => c.classList.remove('selected'));
        }

        // Stream Selection
        function renderStreams() {
            const container = document.getElementById('streams-grid');
            container.innerHTML = streams.map(s => `
                <div class="stream-card glass-card rounded-2xl p-6 border border-white/10" onclick="selectStream('${s.id}')">
                    <div class="w-14 h-14 rounded-xl bg-gradient-to-br ${s.color} flex items-center justify-center mb-4">
                        <i class="fas ${s.icon} text-white text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-white mb-2">${s.name}</h3>
                    <p class="text-sm text-gray-400 mb-4">${s.hasCoding ? 'Includes MCQs + Coding' : 'MCQ Assessment Only'}</p>
                    <div class="flex items-center gap-2 text-xs text-cyan-400">
                        <span>${s.paths.length} career paths</span>
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
            `).join('');
        }

        function selectStream(streamId) {
            selectedStream = streams.find(s => s.id === streamId);
            
            document.querySelectorAll('.stream-card').forEach(c => c.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            const pathContainer = document.getElementById('paths-grid');
            pathContainer.innerHTML = selectedStream.paths.map(p => `
                <div class="glass-card rounded-xl p-5 border border-white/10 cursor-pointer hover:border-cyan-500/50 transition-all" onclick="selectPath('${p.id}', this)">
                    <h4 class="text-white font-semibold mb-1">${p.name}</h4>
                    <p class="text-sm text-gray-400">${p.desc}</p>
                </div>
            `).join('');
            
            document.getElementById('path-selection').classList.remove('hidden');
            document.getElementById('start-test-btn').disabled = true;
            document.getElementById('start-test-btn').classList.add('opacity-50', 'cursor-not-allowed');
        }

        function selectPath(pathId, element) {
            selectedPath = selectedStream.paths.find(p => p.id === pathId);
            
            document.querySelectorAll('#paths-grid > div').forEach(d => {
                d.classList.remove('border-cyan-500', 'bg-cyan-500/10');
                d.classList.add('border-white/10');
            });
            element.classList.remove('border-white/10');
            element.classList.add('border-cyan-500', 'bg-cyan-500/10');
            
            document.getElementById('start-test-btn').disabled = false;
            document.getElementById('start-test-btn').classList.remove('opacity-50', 'cursor-not-allowed');
        }

        // Start Assessment
        function startAssessment() {
            const key = `${selectedStream.id}-${selectedPath.id}`;
            currentTest = questionBanks[key] || questionBanks['cs-software-dev'];
            
            document.getElementById('onboarding-flow').classList.add('hidden');
            document.getElementById('test-interface').classList.remove('hidden');
            
            document.getElementById('test-title').textContent = `${selectedStream.name} Assessment`;
            document.getElementById('test-subtitle').textContent = selectedPath.name;
            
            testState = {
                currentQuestion: 0,
                answers: {},
                codingAnswers: {},
                timeRemaining: selectedStream.hasCoding ? 2700 : 1800,
                timerInterval: null
            };
            
            renderQuestionNav();
            renderQuestion();
            startTimer();
        }

        function renderQuestionNav() {
            const totalQuestions = currentTest.mcqs.length + (currentTest.coding?.length || 0);
            const nav = document.getElementById('question-nav');
            nav.innerHTML = Array.from({length: totalQuestions}, (_, i) => `
                <button onclick="jumpToQuestion(${i})" id="nav-q-${i}" 
                        class="w-10 h-10 rounded-lg text-sm font-medium transition-all ${i === 0 ? 'bg-amber-500 text-white' : 'bg-white/5 text-gray-400 hover:bg-white/10'}">
                    ${i + 1}
                </button>
            `).join('');
        }

        function renderQuestion() {
            const totalMCQs = currentTest.mcqs.length;
            const totalCoding = currentTest.coding?.length || 0;
            const isCoding = testState.currentQuestion >= totalMCQs;
            
            const container = document.getElementById('question-container');
            const progress = ((testState.currentQuestion + 1) / (totalMCQs + totalCoding)) * 100;
            document.getElementById('test-progress').style.width = `${progress}%`;
            
            updateQuestionNav();
            
            if (!isCoding) {
                const q = currentTest.mcqs[testState.currentQuestion];
                const selected = testState.answers[q.id];
                
                container.innerHTML = `
                    <div class="glass-card rounded-3xl p-8 border border-white/10">
                        <div class="flex items-center gap-3 mb-6">
                            <span class="difficulty-badge difficulty-${q.difficulty}">${q.difficulty.toUpperCase()}</span>
                            <span class="px-3 py-1 rounded-full bg-cyan-500/20 text-cyan-400 text-xs font-semibold border border-cyan-500/30">${q.category}</span>
                            <span class="text-gray-500 text-sm">Question ${testState.currentQuestion + 1} of ${totalMCQs + totalCoding}</span>
                        </div>
                        
                        <h3 class="text-xl font-semibold text-white mb-8 leading-relaxed">${q.question}</h3>
                        
                        <div class="space-y-3">
                            ${q.options.map((opt, idx) => `
                                <div onclick="selectMCQAnswer(${q.id}, ${idx})" 
                                     class="test-option p-4 rounded-xl border border-white/10 bg-white/5 flex items-start gap-4 ${selected === idx ? 'selected' : ''}">
                                    <div class="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center text-sm font-bold text-gray-400 flex-shrink-0">
                                        ${String.fromCharCode(65 + idx)}
                                    </div>
                                    <span class="text-gray-300 text-sm leading-relaxed">${opt}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else {
                const codingIdx = testState.currentQuestion - totalMCQs;
                const q = currentTest.coding[codingIdx];
                const savedCode = testState.codingAnswers[q.id] || q.template;
                
                container.innerHTML = `
                    <div class="glass-card rounded-3xl p-8 border border-white/10">
                        <div class="flex items-center gap-3 mb-6">
                            <span class="difficulty-badge difficulty-hard">CODING</span>
                            <span class="text-gray-500 text-sm">Question ${testState.currentQuestion + 1} of ${totalMCQs + totalCoding}</span>
                        </div>
                        
                        <h3 class="text-xl font-semibold text-white mb-2">${q.title}</h3>
                        <p class="text-gray-400 mb-6">${q.description}</p>
                        
                        <div class="code-editor p-4">
                            <textarea id="code-editor" class="w-full h-64 bg-transparent text-gray-300 font-mono text-sm resize-none focus:outline-none" 
                                      spellcheck="false">${savedCode}</textarea>
                        </div>
                        
                        <div class="flex justify-end mt-4">
                            <button onclick="saveCode(${q.id})" class="px-4 py-2 rounded-lg bg-cyan-500/20 text-cyan-400 text-sm font-medium hover:bg-cyan-500/30 transition-colors">
                                <i class="fas fa-save mr-2"></i>Save Code
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        function selectMCQAnswer(qid, idx) {
            testState.answers[qid] = idx;
            renderQuestion();
        }

        function saveCode(qid) {
            const code = document.getElementById('code-editor').value;
            testState.codingAnswers[qid] = code;
            alert('Code saved!');
        }

        function updateQuestionNav() {
            const total = currentTest.mcqs.length + (currentTest.coding?.length || 0);
            for (let i = 0; i < total; i++) {
                const btn = document.getElementById(`nav-q-${i}`);
                if (i === testState.currentQuestion) {
                    btn.className = 'w-10 h-10 rounded-lg text-sm font-medium transition-all bg-amber-500 text-white';
                } else if (i < currentTest.mcqs.length) {
                    const qid = currentTest.mcqs[i].id;
                    const answered = testState.answers[qid] !== undefined;
                    btn.className = `w-10 h-10 rounded-lg text-sm font-medium transition-all ${answered ? 'bg-cyan-500 text-white' : 'bg-white/5 text-gray-400 hover:bg-white/10'}`;
                } else {
                    const cid = currentTest.coding[i - currentTest.mcqs.length].id;
                    const answered = testState.codingAnswers[cid] !== undefined;
                    btn.className = `w-10 h-10 rounded-lg text-sm font-medium transition-all ${answered ? 'bg-cyan-500 text-white' : 'bg-white/5 text-gray-400 hover:bg-white/10'}`;
                }
            }
        }

        function jumpToQuestion(idx) {
            testState.currentQuestion = idx;
            renderQuestion();
        }

        function nextQuestion() {
            const total = currentTest.mcqs.length + (currentTest.coding?.length || 0);
            if (testState.currentQuestion < total - 1) {
                testState.currentQuestion++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (testState.currentQuestion > 0) {
                testState.currentQuestion--;
                renderQuestion();
            }
        }

        function startTimer() {
            updateTimerDisplay();
            testState.timerInterval = setInterval(() => {
                testState.timeRemaining--;
                updateTimerDisplay();
                
                if (testState.timeRemaining <= 300) {
                    document.getElementById('test-timer').classList.add('timer-warning');
                }
                
                if (testState.timeRemaining <= 0) {
                    submitTest();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const mins = Math.floor(testState.timeRemaining / 60);
            const secs = testState.timeRemaining % 60;
            document.getElementById('test-timer').textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function confirmExitTest() {
            if (confirm('Are you sure you want to exit? Your progress will be lost.')) {
                clearInterval(testState.timerInterval);
                document.getElementById('test-interface').classList.add('hidden');
                document.getElementById('onboarding-flow').classList.remove('hidden');
            }
        }

        function submitTest() {
            clearInterval(testState.timerInterval);
            
            // Calculate scores
            let mcqCorrect = 0;
            let mcqTotal = currentTest.mcqs.length;
            
            currentTest.mcqs.forEach(q => {
                if (testState.answers[q.id] === q.correct) mcqCorrect++;
            });
            
            const mcqScore = (mcqCorrect / mcqTotal) * 100;
            
            // Simulate coding evaluation (in real app, this would run test cases)
            let codingPassed = 0;
            let codingTotal = currentTest.coding?.length || 0;
            
            if (codingTotal > 0) {
                Object.keys(testState.codingAnswers).forEach((key, idx) => {
                    // Simulate evaluation - in real app would run against test cases
                    if (testState.codingAnswers[key] && testState.codingAnswers[key].length > 50) {
                        codingPassed++;
                    }
                });
            }
            
            const codingScore = codingTotal > 0 ? (codingPassed / codingTotal) * 100 : 0;
            const totalScore = codingTotal > 0 ? (mcqScore * 0.6 + codingScore * 0.4) : mcqScore;
            
            // Calculate rank (simulated)
            const rank = Math.floor(Math.random() * 500) + 1;
            const percentile = Math.floor(Math.random() * 20) + 80;
            
            showResults({
                totalScore: Math.round(totalScore),
                mcqCorrect,
                mcqTotal,
                codingPassed,
                codingTotal,
                accuracy: Math.round((mcqCorrect / mcqTotal) * 100),
                rank,
                percentile
            });
        }

        function showResults(results) {
            document.getElementById('test-interface').classList.add('hidden');
            document.getElementById('results-page').classList.remove('hidden');
            
            // Animate score
            const circumference = 2 * Math.PI * 88;
            const offset = circumference - (results.totalScore / 100) * circumference;
            
            setTimeout(() => {
                document.getElementById('score-ring').style.strokeDashoffset = offset;
            }, 100);
            
            // Animate number
            let current = 0;
            const interval = setInterval(() => {
                if (current >= results.totalScore) {
                    clearInterval(interval);
                    document.getElementById('final-score').textContent = results.totalScore + '%';
                } else {
                    current++;
                    document.getElementById('final-score').textContent = current + '%';
                }
            }, 20);
            
            // Set stats
            document.getElementById('user-rank').textContent = results.rank;
            document.getElementById('mcq-score').textContent = `${results.mcqCorrect}/${results.mcqTotal}`;
            document.getElementById('coding-score').textContent = results.codingTotal > 0 ? `${results.codingPassed}/${results.codingTotal}` : 'N/A';
            document.getElementById('accuracy').textContent = results.accuracy + '%';
            document.getElementById('percentile').textContent = results.percentile + 'th';
            
            // Set message based on score
            const title = document.getElementById('result-title');
            const message = document.getElementById('result-message');
            
            if (results.totalScore >= 85) {
                title.textContent = 'Outstanding Performance!';
                title.className = 'text-3xl font-bold text-emerald-400 mb-2';
                message.textContent = 'Exceptional skills! You are in the top tier of candidates. Premium opportunities await you.';
            } else if (results.totalScore >= 70) {
                title.textContent = 'Great Job!';
                title.className = 'text-3xl font-bold text-cyan-400 mb-2';
                message.textContent = 'Solid performance! You have strong fundamentals and are ready for challenging roles.';
            } else if (results.totalScore >= 50) {
                title.textContent = 'Good Effort!';
                title.className = 'text-3xl font-bold text-amber-400 mb-2';
                message.textContent = 'Decent start! Focus on strengthening your weak areas to unlock better opportunities.';
            } else {
                title.textContent = 'Keep Learning!';
                title.className = 'text-3xl font-bold text-rose-400 mb-2';
                message.textContent = 'Learning is a journey! Review the concepts and try again to improve your score.';
            }
            
            // Filter opportunities based on score
            const eligibleOpps = opportunities.filter(o => results.totalScore >= o.requirements.minScore && results.rank <= o.requirements.rank);
            
            document.getElementById('opportunities-grid').innerHTML = eligibleOpps.map(o => `
                <div class="opportunity-card glass-card rounded-2xl p-6 border border-white/10">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-lg font-bold text-white mb-1">${o.title}</h4>
                            <p class="text-cyan-400 font-medium">${o.company}</p>
                        </div>
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300 border border-white/10">${o.type}</span>
                    </div>
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-map-marker-alt text-gray-500"></i> ${o.location}
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-rupee-sign text-gray-500"></i> ${o.salary}
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-4">
                        ${o.tags.map(t => `<span class="px-2 py-1 rounded bg-white/5 text-xs text-gray-400 border border-white/10">${t}</span>`).join('')}
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-emerald-400"></div>
                            <span class="text-sm text-emerald-400">${o.match}% Match</span>
                        </div>
                        <button class="px-4 py-2 rounded-lg bg-gradient-to-r from-cyan-500 to-purple-600 text-white text-sm font-medium hover:shadow-lg transition-all">
                            Apply Now
                        </button>
                    </div>
                </div>
            `).join('') || '<div class="col-span-full text-center text-gray-500 py-8">Keep improving to unlock more opportunities!</div>';
            
            // Detailed breakdown
            document.getElementById('detailed-breakdown').innerHTML = currentTest.mcqs.map((q, idx) => {
                const userAns = testState.answers[q.id];
                const isCorrect = userAns === q.correct;
                return `
                    <div class="glass-card rounded-xl p-4 border ${isCorrect ? 'border-emerald-500/30 bg-emerald-500/5' : 'border-red-500/30 bg-red-500/5'}">
                        <div class="flex items-start gap-4">
                            <div class="w-8 h-8 rounded-lg ${isCorrect ? 'bg-emerald-500/20 text-emerald-400' : 'bg-red-500/20 text-red-400'} flex items-center justify-center flex-shrink-0">
                                <i class="fas ${isCorrect ? 'fa-check' : 'fa-times'}"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-xs text-gray-500">Q${idx + 1}</span>
                                    <span class="difficulty-badge difficulty-${q.difficulty}">${q.difficulty}</span>
                                    <span class="px-2 py-0.5 rounded bg-white/10 text-xs text-gray-400">${q.category}</span>
                                </div>
                                <p class="text-white text-sm mb-2">${q.question}</p>
                                <p class="text-xs ${isCorrect ? 'text-emerald-400' : 'text-red-400'}">
                                    ${isCorrect ? 'Correct!' : `Your answer: ${userAns !== undefined ? String.fromCharCode(65 + userAns) : 'Not answered'} | Correct: ${String.fromCharCode(65 + q.correct)}`}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function retakeTest() {
            document.getElementById('results-page').classList.add('hidden');
            document.getElementById('onboarding-flow').classList.remove('hidden');
            goToStep1();
        }

        function enterMainApp() {
            document.getElementById('results-page').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            initMainApp();
        }

        // Main App Functions (Original SkillSync)
        function initMainApp() {
            // Initialize with user's data
            populateProjectSelect();
            calculateMatches();
            renderCandidates();
            renderProjects();
            renderCandidatesGrid();
        }

        function populateProjectSelect() {
            const select = document.getElementById('project-select');
            const projects = [
                { id: 1, title: 'Senior Software Engineer', company: 'TechCorp' },
                { id: 2, title: 'ML Engineer', company: 'DataSystems' },
                { id: 3, title: 'Product Manager', company: 'InnovateLabs' }
            ];
            select.innerHTML = projects.map(p => `<option value="${p.id}">${p.title} at ${p.company}</option>`).join('');
        }

        function calculateMatches() {
            // Simplified matching logic
            const matches = [
                { id: 1, name: currentUser.name, role: selectedPath?.name || 'Software Developer', avatar: currentUser.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase(), gradient: 'from-cyan-400 to-purple-600', score: 92, skills: { Technical: 90, Communication: 88, Leadership: 85 } },
                { id: 2, name: 'Alex Kumar', role: 'Senior Developer', avatar: 'AK', gradient: 'from-purple-400 to-pink-600', score: 88, skills: { Technical: 95, Communication: 82, Leadership: 80 } },
                { id: 3, name: 'Sarah Chen', role: 'Tech Lead', avatar: 'SC', gradient: 'from-emerald-400 to-cyan-600', score: 94, skills: { Technical: 92, Communication: 95, Leadership: 90 } }
            ];
            
            const container = document.getElementById('candidates-list');
            container.innerHTML = matches.map((m, idx) => `
                <div class="glass-card rounded-2xl p-5 cursor-pointer hover:border-cyan-500/50 transition-all" onclick="showCandidateDetail(${m.id})">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-2xl bg-gradient-to-br ${m.gradient} flex items-center justify-center text-lg font-bold text-white">
                            ${m.avatar}
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-center mb-1">
                                <h4 class="text-lg font-bold text-white">${m.name}</h4>
                                <span class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400">${m.score}%</span>
                            </div>
                            <p class="text-sm text-gray-400 mb-2">${m.role}</p>
                            <div class="h-1.5 bg-white/10 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full" style="width: ${m.score}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function showCandidateDetail(id) {
            const panel = document.getElementById('detail-panel');
            const empty = document.getElementById('empty-state');
            
            panel.innerHTML = `
                <div class="text-center mb-6">
                    <div class="w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center text-2xl font-bold text-white mb-4">
                        ${currentUser.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase()}
                    </div>
                    <h3 class="text-2xl font-bold text-white">${currentUser.name}</h3>
                    <p class="text-cyan-400">${selectedPath?.name || 'Software Developer'}</p>
                </div>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-400">Technical Skills</span>
                            <span class="text-white">90%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="h-full bg-cyan-400 rounded-full" style="width: 90%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-400">Problem Solving</span>
                            <span class="text-white">88%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="h-full bg-purple-400 rounded-full" style="width: 88%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-400">Communication</span>
                            <span class="text-white">85%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="h-full bg-pink-400 rounded-full" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-6 pt-6 border-t border-white/10">
                    <button class="w-full py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-purple-600 text-white font-semibold">
                        View Full Profile
                    </button>
                </div>
            `;
            
            panel.classList.remove('hidden');
            empty.classList.add('hidden');
        }

        function renderProjects() {
            document.getElementById('projects-grid').innerHTML = `
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Google - L4 Software Engineer</h3>
                    <p class="text-gray-400 mb-4">Build next-generation search features</p>
                    <div class="flex gap-2">
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300">Go</span>
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300">Distributed Systems</span>
                    </div>
                </div>
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Microsoft - Senior SDE</h3>
                    <p class="text-gray-400 mb-4">Azure cloud infrastructure team</p>
                    <div class="flex gap-2">
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300">C#</span>
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300">Cloud</span>
                    </div>
                </div>
            `;
        }

        function renderCandidatesGrid() {
            document.getElementById('candidates-grid').innerHTML = `
                <div class="glass-card rounded-2xl p-5">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-white font-bold">RK</div>
                        <div>
                            <h4 class="font-bold text-white">Rahul Kumar</h4>
                            <p class="text-sm text-gray-400">Backend Developer</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 text-center">
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-xs text-gray-500">Java</div>
                            <div class="text-sm font-bold text-cyan-400">95%</div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-xs text-gray-500">Spring</div>
                            <div class="text-sm font-bold text-cyan-400">90%</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function switchView(view) {
            document.querySelectorAll('[id^="view-"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${view}`).classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${view}`).classList.add('active');
        }

        function openWeightsModal() {
            document.getElementById('weights-modal').classList.remove('hidden');
        }

        function closeWeightsModal() {
            document.getElementById('weights-modal').classList.add('hidden');
        }

        function resetWeights() {
            closeWeightsModal();
        }

        function applyWeights() {
            closeWeightsModal();
        }

        function sortMatches(criteria) {
            document.querySelectorAll('.sort-btn').forEach(b => {
                b.classList.remove('active', 'bg-white/10', 'text-white');
                b.classList.add('text-gray-400');
            });
            event.target.classList.add('active', 'bg-white/10', 'text-white');
            event.target.classList.remove('text-gray-400');
        }

        // Initialize
        init();
    </script>
</body>
</html>
