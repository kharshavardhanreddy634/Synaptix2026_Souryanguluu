<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSync - Intelligent Talent Matching</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6, .brand {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        body {
            background: #050505;
            color: #fafafa;
            overflow-x: hidden;
        }
        
        /* Animated Gradient Background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(120, 219, 255, 0.15) 0%, transparent 50%);
            animation: gradientShift 20s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        /* Glass Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(120, 119, 198, 0.2);
        }
        
        /* Neon Glows */
        .neon-cyan {
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.5), 0 0 40px rgba(6, 182, 212, 0.3);
        }
        
        .neon-purple {
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.5), 0 0 40px rgba(168, 85, 247, 0.3);
        }
        
        .neon-pink {
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.5), 0 0 40px rgba(236, 72, 153, 0.3);
        }
        
        /* Score Ring Animation */
        .score-ring-circle {
            transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        /* Floating Animation */
        .float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        /* Pulse Glow */
        .pulse-glow {
            animation: pulseGlow 3s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* Skill Bar Animation */
        .skill-fill {
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Tab Active State */
        .nav-item {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #06b6d4, #a855f7);
            transition: width 0.3s ease;
        }
        
        .nav-item.active::after {
            width: 100%;
        }
        
        .nav-item.active {
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        /* Heatmap Cells */
        .heatmap-cell {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .heatmap-cell:hover {
            transform: scale(1.2) rotate(3deg);
            z-index: 10;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        /* Button Hover Effects */
        .btn-primary {
            background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.4);
        }
        
        /* Tag Styles */
        .tag {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        
        /* Explanation Node */
        .explanation-node {
            position: relative;
            padding-left: 30px;
        }
        
        .explanation-node::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 24px;
            bottom: -20px;
            width: 2px;
            background: linear-gradient(to bottom, rgba(6, 182, 212, 0.5), rgba(168, 85, 247, 0.5));
        }
        
        .explanation-node:last-child::before {
            display: none;
        }
        
        .node-dot {
            position: absolute;
            left: 0;
            top: 6px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #050505;
            border: 2px solid #06b6d4;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
        }
        
        /* Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #06b6d4;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.8);
            margin-top: -8px;
        }
        
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }
        
        /* Loading Animation */
        .loader {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: inline-block;
            position: relative;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        
        .loader::after {
            content: '';  
            box-sizing: border-box;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            border-bottom-color: #06b6d4;
        }
        
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Particle Effect */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }
    </style>
</head>
<body class="antialiased">
    <div class="gradient-bg"></div>
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto glass-card rounded-2xl px-6 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center neon-cyan">
                    <i class="fas fa-atom text-white text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-tight text-white">SkillSync</h1>
                    <p class="text-xs text-gray-400 tracking-wider">AI-POWERED MATCHING</p>
                </div>
            </div>
            
            <div class="hidden md:flex items-center gap-8">
                <button onclick="switchView('match')" class="nav-item active text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-match">
                    Matching
                </button>
                <button onclick="switchView('candidates')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-candidates">
                    Talent Pool
                </button>
                <button onclick="switchView('projects')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-projects">
                    Projects
                </button>
                <button onclick="switchView('analytics')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-analytics">
                    Analytics
                </button>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
                    <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></div>
                    <span class="text-xs font-medium text-emerald-400">Fairness Active</span>
                </div>
                <button class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors border border-white/10">
                    <i class="fas fa-bell text-gray-400"></i>
                </button>
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm">
                    PBR
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-28 pb-12 px-6 max-w-7xl mx-auto">
        
        <!-- Header Section -->
        <div class="mb-10 text-center relative">
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl -z-10"></div>
            <h2 class="text-5xl font-bold mb-4 bg-gradient-to-r from-white via-cyan-200 to-purple-200 bg-clip-text text-transparent">
                Intelligent Matching
            </h2>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                Transparent, weighted competency scoring with bias mitigation and explainable AI
            </p>
        </div>

        <!-- Matching View -->
        <div id="view-match" class="space-y-6">
            <!-- Control Bar -->
            <div class="glass-card rounded-2xl p-4 flex flex-wrap items-center justify-between gap-4">
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <select id="project-select" onchange="changeProject(this.value)" class="appearance-none bg-black/30 border border-white/10 rounded-xl px-5 py-3 pr-12 text-white focus:outline-none focus:border-cyan-500/50 min-w-[300px]">
                            <!-- Options populated by JS -->
                        </select>
                        <i class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                    </div>
                    <button onclick="openWeightsModal()" class="px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-sm font-medium transition-all flex items-center gap-2">
                        <i class="fas fa-sliders-h text-cyan-400"></i>
                        Adjust Weights
                    </button>
                </div>
                
                <div class="flex items-center gap-3">
                    <span class="text-sm text-gray-400">Sort by:</span>
                    <div class="flex bg-black/30 rounded-lg p-1 border border-white/10">
                        <button onclick="sortMatches('score')" class="sort-btn active px-4 py-1.5 rounded-md text-sm font-medium transition-all bg-white/10 text-white" data-sort="score">
                            Match Score
                        </button>
                        <button onclick="sortMatches('fairness')" class="sort-btn px-4 py-1.5 rounded-md text-sm font-medium text-gray-400 hover:text-white transition-all" data-sort="fairness">
                            Fairness
                        </button>
                        <button onclick="sortMatches('diversity')" class="sort-btn px-4 py-1.5 rounded-md text-sm font-medium text-gray-400 hover:text-white transition-all" data-sort="diversity">
                            Diversity
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Candidates List -->
                <div class="lg:col-span-7 space-y-4" id="candidates-list">
                    <!-- Candidates rendered here -->
                </div>

                <!-- Detail Panel -->
                <div class="lg:col-span-5">
                    <div class="sticky top-28 space-y-4">
                        <!-- Selected Candidate Detail -->
                        <div id="detail-panel" class="glass-card rounded-2xl p-6 hidden">
                            <div class="flex items-start justify-between mb-6">
                                <div class="flex items-center gap-4">
                                    <div id="detail-avatar" class="w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-2xl font-bold text-white neon-cyan">
                                        --
                                    </div>
                                    <div>
                                        <h3 id="detail-name" class="text-2xl font-bold text-white">--</h3>
                                        <p id="detail-role" class="text-gray-400">--</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div id="detail-score" class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400">
                                        --
                                    </div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mt-1">Match Score</p>
                                </div>
                            </div>

                            <!-- Score Breakdown -->
                            <div class="space-y-4 mb-6">
                                <h4 class="text-sm font-semibold text-gray-300 uppercase tracking-wider">Score Breakdown</h4>
                                <div id="score-breakdown" class="space-y-3">
                                    <!-- Breakdown bars -->
                                </div>
                            </div>

                            <!-- Explanation Flow -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-semibold text-gray-300 uppercase tracking-wider">Decision Logic</h4>
                                <div id="explanation-flow" class="space-y-4">
                                    <!-- Explanation nodes -->
                                </div>
                            </div>

                            <!-- Fairness Info -->
                            <div id="fairness-info" class="mt-6 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 hidden">
                                <div class="flex items-center gap-2 mb-2">
                                    <i class="fas fa-shield-alt text-emerald-400"></i>
                                    <span class="text-sm font-semibold text-emerald-400">Fairness Adjustments Applied</span>
                                </div>
                                <ul id="fairness-list" class="space-y-1 text-sm text-emerald-300/80">
                                </ul>
                            </div>
                        </div>

                        <!-- Empty State -->
                        <div id="empty-state" class="glass-card rounded-2xl p-12 text-center">
                            <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-white/5 flex items-center justify-center">
                                <i class="fas fa-user-astronaut text-4xl text-gray-600"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-white mb-2">Select a Candidate</h3>
                            <p class="text-gray-400">Click on any candidate to view detailed matching analysis and explainable AI reasoning.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Candidates View -->
        <div id="view-candidates" class="hidden space-y-6">
            <div class="glass-card rounded-2xl p-8">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h3 class="text-2xl font-bold text-white mb-1">Talent Pool</h3>
                        <p class="text-gray-400">Browse all candidates and their competency profiles</p>
                    </div>
                    <div class="flex gap-3">
                        <input type="text" placeholder="Search skills..." class="px-4 py-2 rounded-lg bg-black/30 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500/50">
                        <button class="px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 text-white transition-colors">
                            <i class="fas fa-filter"></i>
                        </button>
                    </div>
                </div>
                <div id="candidates-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Grid items -->
                </div>
            </div>
        </div>

        <!-- Projects View -->
        <div id="view-projects" class="hidden space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="projects-grid">
                <!-- Project cards -->
            </div>
        </div>

        <!-- Analytics View -->
        <div id="view-analytics" class="hidden space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card rounded-2xl p-6 text-center">
                    <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2">94.2%</div>
                    <p class="text-gray-400">Average Match Quality</p>
                </div>
                <div class="glass-card rounded-2xl p-6 text-center">
                    <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-2">0.89</div>
                    <p class="text-gray-400">Fairness Index</p>
                </div>
                <div class="glass-card rounded-2xl p-6 text-center">
                    <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 mb-2">2.1s</div>
                    <p class="text-gray-400">Avg Processing Time</p>
                </div>
            </div>
            
            <div class="glass-card rounded-2xl p-8">
                <h3 class="text-xl font-bold text-white mb-6">Matching Algorithm Performance</h3>
                <div class="h-64 flex items-end justify-around gap-4">
                    <div class="flex-1 flex flex-col items-center gap-2">
                        <div class="w-full bg-gradient-to-t from-cyan-500/20 to-cyan-500 rounded-t-lg relative group cursor-pointer" style="height: 75%">
                            <div class="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-bold text-cyan-400">75%</div>
                        </div>
                        <span class="text-xs text-gray-500">Technical</span>
                    </div>
                    <div class="flex-1 flex flex-col items-center gap-2">
                        <div class="w-full bg-gradient-to-t from-purple-500/20 to-purple-500 rounded-t-lg relative group cursor-pointer" style="height: 60%">
                            <div class="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-bold text-purple-400">60%</div>
                        </div>
                        <span class="text-xs text-gray-500">Communication</span>
                    </div>
                    <div class="flex-1 flex flex-col items-center gap-2">
                        <div class="w-full bg-gradient-to-t from-pink-500/20 to-pink-500 rounded-t-lg relative group cursor-pointer" style="height: 45%">
                            <div class="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-bold text-pink-400">45%</div>
                        </div>
                        <span class="text-xs text-gray-500">Leadership</span>
                    </div>
                    <div class="flex-1 flex flex-col items-center gap-2">
                        <div class="w-full bg-gradient-to-t from-emerald-500/20 to-emerald-500 rounded-t-lg relative group cursor-pointer" style="height: 80%">
                            <div class="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-sm font-bold text-emerald-400">80%</div>
                        </div>
                        <span class="text-xs text-gray-500">Experience</span>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Weights Modal -->
    <div id="weights-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeWeightsModal()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg">
            <div class="glass-card rounded-3xl p-8 border border-white/20">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="text-2xl font-bold text-white">Adjust Scoring Weights</h3>
                    <button onclick="closeWeightsModal()" class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-gray-400"></i>
                    </button>
                </div>
                
                <div class="space-y-8" id="weights-container">
                    <!-- Weight sliders -->
                </div>
                
                <div class="mt-8 pt-6 border-t border-white/10 flex justify-end gap-3">
                    <button onclick="resetWeights()" class="px-6 py-3 rounded-xl text-gray-400 hover:text-white transition-colors">
                        Reset
                    </button>
                    <button onclick="applyWeights()" class="btn-primary px-6 py-3 rounded-xl text-white font-semibold">
                        Apply Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data
        const candidates = [
            {
                id: 1,
                name: "Nithin Chen",
                role: "ML Engineer",
                avatar: "NC",
                gradient: "from-cyan-400 to-blue-600",
                skills: { "Python": 95, "Machine Learning": 94, "Data Analysis": 93, "Communication": 95, "Leadership": 89 },
                demographics: { gender: "Male", ethnicity: "Asian", socioeconomic: "Medium" },
                experience: 6,
                education: "MS Computer Science",
                projects: 19
            },
            {
                id: 2,
                name: "Harsha Johnson",
                role: "Data Scientist",
                avatar: "HJ",
                gradient: "from-purple-400 to-pink-600",
                skills: { "Python": 88, "Machine Learning": 85, "Data Analysis": 75, "Communication": 90, "Leadership": 80 },
                demographics: { gender: "Male", ethnicity: "Black", socioeconomic: "Low" },
                experience: 5,
                education: "PhD Statistics",
                projects: 13
            },
            {
                id: 3,
                name: "Elena Dinesh",
                role: "AI Researcher",
                avatar: "ED",
                gradient: "from-emerald-400 to-cyan-600",
                skills: { "Python": 98, "Machine Learning": 96, "Data Analysis": 90, "Communication": 82, "Leadership": 80 },
                demographics: { gender: "Male", ethnicity: "Hispanic", socioeconomic: "Low" },
                experience: 5,
                education: "MS AI/ML",
                projects: 14
            },
            {
                id: 4,
                name: "Uday David",
                role: "Software Engineer",
                avatar: "UD",
                gradient: "from-amber-400 to-orange-600",
                skills: { "Python": 75, "Machine Learning": 75, "Data Analysis": 50, "Communication": 68, "Leadership": 25 },
                demographics: { gender: "Male", ethnicity: "Asian", socioeconomic: "High" },
                experience: 2,
                education: "BS Computer Science",
                projects: 09
            },
            {
                id: 5,
                name: "Phani Patel",
                role: "Analytics Lead",
                avatar: "PP",
                gradient: "from-rose-400 to-purple-600",
                skills: { "Python": 90, "Machine Learning": 88, "Data Analysis": 94, "Communication": 95, "Leadership": 90 },
                demographics: { gender: "Male", ethnicity: "South Asian", socioeconomic: "Medium" },
                experience: 7,
                education: "MBA, MS Data Science",
                projects: 18
            }
        ];

        const projects = [
            {
                id: 1,
                title: "Senior ML Engineer",
                company: "TechVision AI",
                description: "Lead machine learning initiatives and mentor junior team members",
                requirements: { "Python": 90, "Machine Learning": 90, "Data Analysis": 85, "Communication": 80, "Leadership": 75 },
                weights: { technical: 0.5, communication: 0.2, leadership: 0.2, experience: 0.1 }
            },
            {
                id: 2,
                title: "Data Science Intern",
                company: "DataFlow Inc",
                description: "Assist in building predictive models and data pipelines",
                requirements: { "Python": 80, "Machine Learning": 75, "Data Analysis": 90, "Communication": 70, "Leadership": 60 },
                weights: { technical: 0.6, communication: 0.2, leadership: 0.1, experience: 0.1 }
            },
            {
                id: 3,
                title: "AI Product Manager",
                company: "InnovateLabs",
                description: "Bridge technical teams and business stakeholders",
                requirements: { "Python": 70, "Machine Learning": 80, "Data Analysis": 85, "Communication": 95, "Leadership": 90 },
                weights: { technical: 0.3, communication: 0.4, leadership: 0.2, experience: 0.1 }
            }
        ];

        let currentProject = projects[0];
        let currentWeights = { ...currentProject.weights };
        let selectedCandidate = null;
        let matches = [];

        // Initialize
        function init() {
            populateProjectSelect();
            calculateMatches();
            renderCandidates();
            renderProjects();
            renderCandidatesGrid();
            renderWeightControls();
        }

        function populateProjectSelect() {
            const select = document.getElementById('project-select');
            select.innerHTML = projects.map(p => 
                `<option value="${p.id}" ${p.id === currentProject.id ? 'selected' : ''}>${p.title} at ${p.company}</option>`
            ).join('');
        }

        function changeProject(projectId) {
            currentProject = projects.find(p => p.id == projectId);
            currentWeights = { ...currentProject.weights };
            selectedCandidate = null;
            updateDetailPanel();
            calculateMatches();
            renderCandidates();
        }

        function calculateMatches() {
            matches = candidates.map(c => {
                const scores = {
                    technical: calculateTechnicalScore(c),
                    communication: c.skills.Communication,
                    leadership: c.skills.Leadership,
                    experience: Math.min(100, c.experience * 15)
                };
                
                let rawScore = (
                    scores.technical * currentWeights.technical +
                    scores.communication * currentWeights.communication +
                    scores.leadership * currentWeights.leadership +
                    scores.experience * currentWeights.experience
                );
                
                // Fairness adjustments
                let fairnessBonus = 0;
                const adjustments = [];
                
                if (c.demographics.socioeconomic === "Low") {
                    fairnessBonus += 3;
                    adjustments.push("Socioeconomic opportunity boost (+3%)");
                }
                if (c.demographics.gender === "Female") {
                    fairnessBonus += 2;
                    adjustments.push("Gender parity adjustment (+2%)");
                }
                
                const finalScore = Math.min(100, rawScore + fairnessBonus);
                
                return {
                    ...c,
                    scores,
                    rawScore,
                    finalScore,
                    fairnessBonus,
                    adjustments,
                    gaps: calculateGaps(c)
                };
            }).sort((a, b) => b.finalScore - a.finalScore);
        }

        function calculateTechnicalScore(candidate) {
            let total = 0;
            let count = 0;
            for (let skill in currentProject.requirements) {
                if (skill !== "Communication" && skill !== "Leadership") {
                    const required = currentProject.requirements[skill];
                    const actual = candidate.skills[skill] || 0;
                    total += Math.min(100, (actual / required) * 100);
                    count++;
                }
            }
            return count > 0 ? total / count : 0;
        }

        function calculateGaps(candidate) {
            const gaps = [];
            for (let skill in currentProject.requirements) {
                const required = currentProject.requirements[skill];
                const actual = candidate.skills[skill] || 0;
                if (actual < required) {
                    gaps.push({ skill, required, actual, gap: required - actual });
                }
            }
            return gaps.sort((a, b) => b.gap - a.gap);
        }

        function renderCandidates() {
            const container = document.getElementById('candidates-list');
            container.innerHTML = matches.map((match, idx) => `
                <div onclick="selectCandidate(${match.id})" 
                     class="glass-card rounded-2xl p-5 cursor-pointer transition-all duration-300 hover:scale-[1.02] ${selectedCandidate?.id === match.id ? 'border-cyan-500/50 bg-cyan-500/5' : ''}">
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <div class="w-14 h-14 rounded-2xl bg-gradient-to-br ${match.gradient} flex items-center justify-center text-lg font-bold text-white shadow-lg">
                                ${match.avatar}
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-black border border-white/20 flex items-center justify-center text-xs font-bold text-white">
                                ${idx + 1}
                            </div>
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="text-lg font-bold text-white truncate">${match.name}</h4>
                                <div class="flex items-center gap-2">
                                    <span class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400">
                                        ${match.finalScore.toFixed(1)}%
                                    </span>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400 mb-2">${match.role} • ${match.experience} years</p>
                            
                            <div class="flex items-center gap-3">
                                <div class="flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-full bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full" style="width: ${match.finalScore}%"></div>
                                </div>
                                ${match.adjustments.length > 0 ? `
                                    <span class="flex-shrink-0 w-2 h-2 rounded-full bg-emerald-400 animate-pulse" title="Fairness adjusted"></span>
                                ` : ''}
                            </div>
                        </div>
                        
                        <div class="hidden sm:block">
                            <svg class="w-16 h-16 transform -rotate-90">
                                <circle cx="32" cy="32" r="28" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="4"/>
                                <circle cx="32" cy="32" r="28" fill="none" stroke="url(#gradient)" stroke-width="4" 
                                        stroke-dasharray="${2 * Math.PI * 28}" 
                                        stroke-dashoffset="${2 * Math.PI * 28 * (1 - match.finalScore/100)}"
                                        class="score-ring-circle"/>
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#06b6d4" />
                                        <stop offset="100%" stop-color="#a855f7" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function selectCandidate(id) {
            selectedCandidate = matches.find(m => m.id === id);
            updateDetailPanel();
            renderCandidates(); // Re-render to update selection state
        }

        function updateDetailPanel() {
            const detailPanel = document.getElementById('detail-panel');
            const emptyState = document.getElementById('empty-state');
            
            if (!selectedCandidate) {
                detailPanel.classList.add('hidden');
                emptyState.classList.remove('hidden');
                return;
            }
            
            detailPanel.classList.remove('hidden');
            emptyState.classList.add('hidden');
            
            // Update header
            document.getElementById('detail-avatar').className = `w-16 h-16 rounded-2xl bg-gradient-to-br ${selectedCandidate.gradient} flex items-center justify-center text-2xl font-bold text-white neon-cyan`;
            document.getElementById('detail-avatar').textContent = selectedCandidate.avatar;
            document.getElementById('detail-name').textContent = selectedCandidate.name;
            document.getElementById('detail-role').textContent = `${selectedCandidate.role} • ${selectedCandidate.education}`;
            document.getElementById('detail-score').textContent = selectedCandidate.finalScore.toFixed(1) + '%';
            
            // Score breakdown
            const breakdownHtml = `
                <div class="space-y-3">
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">Technical Competency</span>
                            <span class="text-white font-medium">${selectedCandidate.scores.technical.toFixed(1)}%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="skill-fill h-full bg-gradient-to-r from-cyan-400 to-cyan-600 rounded-full" style="width: ${selectedCandidate.scores.technical}%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">Communication</span>
                            <span class="text-white font-medium">${selectedCandidate.scores.communication}%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="skill-fill h-full bg-gradient-to-r from-purple-400 to-purple-600 rounded-full" style="width: ${selectedCandidate.scores.communication}%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">Leadership</span>
                            <span class="text-white font-medium">${selectedCandidate.scores.leadership}%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="skill-fill h-full bg-gradient-to-r from-pink-400 to-pink-600 rounded-full" style="width: ${selectedCandidate.scores.leadership}%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-400">Experience</span>
                            <span class="text-white font-medium">${selectedCandidate.scores.experience.toFixed(1)}%</span>
                        </div>
                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                            <div class="skill-fill h-full bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-full" style="width: ${selectedCandidate.scores.experience}%"></div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('score-breakdown').innerHTML = breakdownHtml;
            
            // Explanation flow
            const explanationHtml = selectedCandidate.gaps.map(gap => `
                <div class="explanation-node">
                    <div class="node-dot"></div>
                    <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                        <div class="flex items-center justify-between mb-1">
                            <span class="text-sm font-medium text-amber-400">Skill Gap Identified</span>
                            <span class="text-xs text-gray-500">${gap.skill}</span>
                        </div>
                        <p class="text-sm text-gray-300">
                            Required: <span class="text-white font-medium">${gap.required}%</span> • 
                            Actual: <span class="text-white font-medium">${gap.actual}%</span>
                        </p>
                        <div class="mt-2 h-1 bg-white/10 rounded-full overflow-hidden">
                            <div class="h-full bg-amber-500 rounded-full" style="width: ${(gap.actual/gap.required)*100}%"></div>
                        </div>
                    </div>
                </div>
            `).join('');
            document.getElementById('explanation-flow').innerHTML = explanationHtml || 
                '<div class="text-gray-500 text-sm italic">No significant skill gaps identified</div>';
            
            // Fairness info
            const fairnessInfo = document.getElementById('fairness-info');
            if (selectedCandidate.adjustments.length > 0) {
                fairnessInfo.classList.remove('hidden');
                document.getElementById('fairness-list').innerHTML = selectedCandidate.adjustments.map(adj => 
                    `<li class="flex items-center gap-2"><i class="fas fa-check text-xs"></i>${adj}</li>`
                ).join('');
            } else {
                fairnessInfo.classList.add('hidden');
            }
        }

        function sortMatches(criteria) {
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-white/10', 'text-white');
                btn.classList.add('text-gray-400');
            });
            document.querySelector(`[data-sort="${criteria}"]`).classList.add('active', 'bg-white/10', 'text-white');
            document.querySelector(`[data-sort="${criteria}"]`).classList.remove('text-gray-400');
            
            if (criteria === 'score') {
                matches.sort((a, b) => b.finalScore - a.finalScore);
            } else if (criteria === 'fairness') {
                matches.sort((a, b) => b.adjustments.length - a.adjustments.length);
            } else if (criteria === 'diversity') {
                matches.sort((a, b) => Math.random() - 0.5);
            }
            renderCandidates();
        }

        function switchView(view) {
            document.querySelectorAll('[id^="view-"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${view}`).classList.remove('hidden');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${view}`).classList.add('active');
        }

        function openWeightsModal() {
            document.getElementById('weights-modal').classList.remove('hidden');
            renderWeightControls();
        }

        function closeWeightsModal() {
            document.getElementById('weights-modal').classList.add('hidden');
        }

        function renderWeightControls() {
            const container = document.getElementById('weights-container');
            const weights = [
                { key: 'technical', label: 'Technical Skills', color: 'cyan', value: currentWeights.technical },
                { key: 'communication', label: 'Communication', color: 'purple', value: currentWeights.communication },
                { key: 'leadership', label: 'Leadership', color: 'pink', value: currentWeights.leadership },
                { key: 'experience', label: 'Experience', color: 'emerald', value: currentWeights.experience }
            ];
            
            container.innerHTML = weights.map(w => `
                <div>
                    <div class="flex justify-between items-center mb-3">
                        <label class="text-white font-medium">${w.label}</label>
                        <span class="text-${w.color}-400 font-bold" id="weight-val-${w.key}">${(w.value * 100).toFixed(0)}%</span>
                    </div>
                    <input type="range" min="0" max="100" value="${w.value * 100}" 
                           class="w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer"
                           oninput="updateWeightPreview('${w.key}', this.value)">
                    <div class="mt-2 h-1 bg-${w.color}-500/20 rounded-full overflow-hidden">
                        <div id="weight-bar-${w.key}" class="h-full bg-${w.color}-500 transition-all duration-300" style="width: ${w.value * 100}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function updateWeightPreview(key, value) {
            document.getElementById(`weight-val-${key}`).textContent = value + '%';
            document.getElementById(`weight-bar-${key}`).style.width = value + '%';
        }

        function applyWeights() {
            ['technical', 'communication', 'leadership', 'experience'].forEach(key => {
                const val = document.getElementById(`weight-val-${key}`).textContent;
                currentWeights[key] = parseInt(val) / 100;
            });
            closeWeightsModal();
            calculateMatches();
            renderCandidates();
            if (selectedCandidate) {
                selectedCandidate = matches.find(m => m.id === selectedCandidate.id);
                updateDetailPanel();
            }
        }

        function resetWeights() {
            currentWeights = { ...currentProject.weights };
            renderWeightControls();
        }

        function renderProjects() {
            const container = document.getElementById('projects-grid');
            container.innerHTML = projects.map(p => `
                <div class="glass-card rounded-2xl p-6 hover:border-purple-500/30 transition-all cursor-pointer group" onclick="changeProject(${p.id}); switchView('match');">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-xl font-bold text-white mb-1 group-hover:text-purple-400 transition-colors">${p.title}</h3>
                            <p class="text-gray-400 text-sm">${p.company}</p>
                        </div>
                        <span class="px-3 py-1 rounded-full bg-white/5 text-xs text-gray-300 border border-white/10">Active</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-6">${p.description}</p>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-500">Technical Weight</span>
                            <span class="text-cyan-400">${(p.weights.technical * 100).toFixed(0)}%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-500">Communication</span>
                            <span class="text-purple-400">${(p.weights.communication * 100).toFixed(0)}%</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderCandidatesGrid() {
            const container = document.getElementById('candidates-grid');
            container.innerHTML = candidates.map(c => `
                <div class="glass-card rounded-2xl p-5 hover:scale-[1.02] transition-transform">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br ${c.gradient} flex items-center justify-center text-white font-bold">
                            ${c.avatar}
                        </div>
                        <div>
                            <h4 class="font-bold text-white">${c.name}</h4>
                            <p class="text-sm text-gray-400">${c.role}</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        ${Object.entries(c.skills).slice(0, 4).map(([skill, level]) => `
                            <div class="bg-white/5 rounded-lg p-2 text-center">
                                <div class="text-xs text-gray-500 mb-1">${skill}</div>
                                <div class="text-sm font-bold text-cyan-400">${level}%</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Initialize app
        init();
    </script>
</body>
</html>