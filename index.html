<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSync AI - Explainable Skill-Based Internship & Project Matching</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <style>
        /* Your existing styles remain the same */
        * {
            font-family: 'Inter', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6, .brand {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        body {
            background: #050505;
            color: #fafafa;
            overflow-x: hidden;
        }
        
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(120, 219, 255, 0.15) 0%, transparent 50%);
            animation: gradientShift 20s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -30px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(120, 119, 198, 0.2);
        }
        
        .neon-cyan { box-shadow: 0 0 20px rgba(6, 182, 212, 0.5), 0 0 40px rgba(6, 182, 212, 0.3); }
        .neon-purple { box-shadow: 0 0 20px rgba(168, 85, 247, 0.5), 0 0 40px rgba(168, 85, 247, 0.3); }
        .neon-pink { box-shadow: 0 0 20px rgba(236, 72, 153, 0.5), 0 0 40px rgba(236, 72, 153, 0.3); }
        
        .float { animation: float 6s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .pulse-glow { animation: pulseGlow 3s ease-in-out infinite; }
        @keyframes pulseGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .skill-fill { transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1); }
        
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.02); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
        
        .nav-item { position: relative; transition: all 0.3s ease; cursor: pointer; }
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #06b6d4, #a855f7);
            transition: width 0.3s ease;
        }
        .nav-item.active::after { width: 100%; }
        .nav-item.active { color: #fff; text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
        
        .btn-primary {
            background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .btn-primary:hover::before { left: 100%; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(6, 182, 212, 0.4); }
        
        .test-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .test-option:hover {
            background: rgba(6, 182, 212, 0.1);
            border-color: rgba(6, 182, 212, 0.3);
        }
        .test-option.selected {
            background: rgba(6, 182, 212, 0.2);
            border-color: #06b6d4;
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
        }
        .test-option.correct { background: rgba(16, 185, 129, 0.2); border-color: #10b981; }
        .test-option.incorrect { background: rgba(239, 68, 68, 0.2); border-color: #ef4444; }
        
        .timer-warning { animation: timerPulse 1s infinite; }
        @keyframes timerPulse {
            0%, 100% { color: #ef4444; }
            50% { color: #fbbf24; }
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .file-upload-zone {
            border: 2px dashed rgba(255,255,255,0.2);
            transition: all 0.3s;
        }
        .file-upload-zone:hover, .file-upload-zone.dragover {
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.05);
        }
        
        .difficulty-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: 600;
        }
        .difficulty-easy { background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3); }
        .difficulty-medium { background: rgba(251, 191, 36, 0.2); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.3); }
        .difficulty-hard { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
        .difficulty-expert { background: rgba(168, 85, 247, 0.2); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.3); }
        
        .otp-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: white;
            border-radius: 12px;
            transition: all 0.3s;
        }
        .otp-input:focus {
            border-color: #06b6d4;
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
            outline: none;
        }
        
        .rank-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }
        
        .opportunity-card {
            transition: all 0.3s ease;
        }
        .opportunity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(6, 182, 212, 0.2);
        }
        
        .typing-effect::after {
            content: '|';
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        .scanner-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #06b6d4, transparent);
            animation: scan 2s linear infinite;
            box-shadow: 0 0 10px #06b6d4;
        }
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
        
        .skill-tag {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
            color: #06b6d4;
            transition: all 0.3s;
        }
        .skill-tag:hover {
            background: rgba(6, 182, 212, 0.2);
            transform: translateY(-2px);
        }
        
        .project-card {
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .project-card:hover {
            border-color: rgba(168, 85, 247, 0.5);
            transform: translateY(-3px);
        }
        
        .competency-meter {
            position: relative;
            overflow: hidden;
        }
        .competency-meter::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .fairness-indicator {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.1));
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .fake-score-low { color: #10b981; }
        .fake-score-medium { color: #fbbf24; }
        .fake-score-high { color: #ef4444; }
        
        .comparison-row {
            transition: all 0.3s;
        }
        .comparison-row:hover {
            background: rgba(255,255,255,0.05);
        }
        .comparison-row.user-highlight {
            background: rgba(6, 182, 212, 0.1);
            border-left: 3px solid #06b6d4;
        }
        
        .loading-pulse {
            animation: loadingPulse 1.5s ease-in-out infinite;
        }
        @keyframes loadingPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .explanation-card {
            border-left: 3px solid #06b6d4;
            background: rgba(6, 182, 212, 0.05);
        }
        
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .placement-probability {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(6, 182, 212, 0.3);
        }
        
        .resume-comparison-card {
            transition: all 0.3s;
            cursor: pointer;
        }
        .resume-comparison-card:hover {
            transform: scale(1.02);
            border-color: rgba(168, 85, 247, 0.5);
        }
        .resume-comparison-card.selected {
            border-color: #a855f7;
            background: rgba(168, 85, 247, 0.1);
        }
        
        .match-reasoning {
            background: rgba(6, 182, 212, 0.05);
            border-left: 4px solid #06b6d4;
        }
    </style>
</head>
<body class="antialiased">
    <div class="gradient-bg"></div>

    <!-- Auth Modal (same as before) -->
    <div id="auth-modal" class="fixed inset-0 z-[100] flex items-center justify-center">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-xl"></div>
        <div class="relative w-full max-w-md p-8">
            <div class="glass-card rounded-3xl p-8 border border-white/10">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center neon-cyan">
                        <i class="fas fa-atom text-white text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-2">Welcome to SkillSync AI</h2>
                    <p class="text-gray-400 text-sm">Explainable Skill-Based Internship & Project Matching</p>
                </div>

                <!-- Step 1: Basic Info -->
                <div id="auth-step-1" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Full Name</label>
                        <input type="text" id="user-name" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="Enter your full name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Email Address</label>
                        <input type="email" id="user-email" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-2">Mobile Number</label>
                        <div class="flex gap-2">
                            <span class="px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-400 flex items-center">+91</span>
                            <input type="tel" id="user-mobile" class="flex-1 px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-cyan-500/50 transition-colors" placeholder="9876543210" maxlength="10">
                        </div>
                    </div>
                    <button onclick="sendOTP()" class="w-full btn-primary py-3 rounded-xl text-white font-semibold mt-6">
                        Send OTP <i class="fas fa-paper-plane ml-2"></i>
                    </button>
                </div>

                <!-- Step 2: OTP Verification -->
                <div id="auth-step-2" class="hidden space-y-6">
                    <div class="text-center">
                        <p class="text-gray-400 text-sm mb-2">Enter OTP sent to <span id="otp-phone" class="text-cyan-400"></span></p>
                        <div class="flex justify-center gap-3">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 0)" onkeydown="handleOTPKeydown(event, 0)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 1)" onkeydown="handleOTPKeydown(event, 1)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 2)" onkeydown="handleOTPKeydown(event, 2)">
                            <input type="text" class="otp-input" maxlength="1" oninput="handleOTPInput(this, 3)" onkeydown="handleOTPKeydown(event, 3)">
                        </div>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-500">Didn't receive? <button onclick="resendOTP()" class="text-cyan-400 hover:text-cyan-300 font-medium">Resend</button></p>
                    </div>
                    <button onclick="verifyOTP()" class="w-full btn-primary py-3 rounded-xl text-white font-semibold">
                        Verify & Continue <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Upload & Analysis Flow -->
    <div id="resume-flow" class="hidden fixed inset-0 z-[90] overflow-y-auto bg-[#0a0a0a]">
        <div class="min-h-screen px-6 py-12 flex flex-col items-center justify-center">
            
            <!-- Step 1: Resume Upload -->
            <div id="resume-step-1" class="w-full max-w-3xl">
                <div class="text-center mb-12">
                    <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-cyan-400/20 to-purple-600/20 flex items-center justify-center float">
                        <i class="fas fa-cloud-upload-alt text-4xl text-cyan-400"></i>
                    </div>
                    <h2 class="text-4xl font-bold text-white mb-4">Upload Your Resume</h2>
                    <p class="text-xl text-gray-400">Our AI will analyze your skills, projects, and experience</p>
                </div>

                <div class="glass-card rounded-3xl p-8 mb-8 relative overflow-hidden">
                    <div id="upload-zone" class="file-upload-zone rounded-2xl p-12 text-center cursor-pointer relative" onclick="document.getElementById('resume-input').click()" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <input type="file" id="resume-input" class="hidden" accept=".pdf,.doc,.docx,.txt" onchange="handleFileSelect(event)">
                        <div id="upload-content">
                            <i class="fas fa-file-upload text-5xl text-gray-500 mb-4"></i>
                            <p class="text-lg text-white font-medium mb-2">Drop your resume here</p>
                            <p class="text-sm text-gray-500">or click to browse (PDF, DOC, DOCX, TXT)</p>
                            <p class="text-xs text-gray-600 mt-4">AI-powered analysis for skills, projects & experience</p>
                        </div>
                        <div id="upload-success" class="hidden">
                            <i class="fas fa-check-circle text-5xl text-emerald-400 mb-4"></i>
                            <p class="text-lg text-white font-medium" id="filename-display">resume.pdf</p>
                            <p class="text-sm text-cyan-400 mt-2">Ready for AI analysis</p>
                        </div>
                        <div id="upload-scanning" class="hidden absolute inset-0 bg-black/80 backdrop-blur-sm rounded-2xl flex flex-col items-center justify-center">
                            <div class="scanner-line"></div>
                            <i class="fas fa-brain text-4xl text-cyan-400 mb-4 loading-pulse"></i>
                            <p class="text-white font-medium">AI Analyzing Resume...</p>
                            <p class="text-sm text-gray-400 mt-2">Extracting skills, projects & experience</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="analyzeResume()" id="analyze-btn" class="btn-primary px-12 py-4 rounded-xl text-white font-bold text-lg opacity-50 cursor-not-allowed" disabled>
                        Analyze Resume <i class="fas fa-magic ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Analysis Results -->
            <div id="resume-step-2" class="w-full max-w-6xl hidden">
                <div class="text-center mb-8">
                    <h2 class="text-4xl font-bold text-white mb-4">Resume Analysis Complete</h2>
                    <p class="text-xl text-gray-400">We've identified your technical profile with explainable AI</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Skills Overview -->
                    <div class="glass-card rounded-3xl p-6 lg:col-span-2">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                            <i class="fas fa-code text-cyan-400"></i>
                            Technical Skills Identified
                        </h3>
                        <div id="extracted-skills" class="flex flex-wrap gap-2 mb-6">
                            <!-- Populated by JS -->
                        </div>
                        <div class="space-y-4" id="skills-breakdown">
                            <!-- Skill bars populated by JS -->
                        </div>
                    </div>

                    <!-- Profile Summary -->
                    <div class="glass-card rounded-3xl p-6">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                            <i class="fas fa-user-circle text-purple-400"></i>
                            Profile Summary
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-white/5 rounded-xl p-4">
                                <p class="text-xs text-gray-400 uppercase mb-1">Primary Domain</p>
                                <p class="text-lg font-semibold text-cyan-400" id="detected-domain">-</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4">
                                <p class="text-xs text-gray-400 uppercase mb-1">Experience Level</p>
                                <p class="text-lg font-semibold text-purple-400" id="detected-level">-</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4">
                                <p class="text-xs text-gray-400 uppercase mb-1">Projects Found</p>
                                <p class="text-lg font-semibold text-emerald-400" id="projects-count">0 Projects</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4">
                                <p class="text-xs text-gray-400 uppercase mb-1">Resume Authenticity</p>
                                <div class="flex items-center gap-2">
                                    <div class="flex-1 h-2 bg-white/10 rounded-full overflow-hidden">
                                        <div id="authenticity-bar" class="h-full bg-emerald-400 rounded-full" style="width: 0%"></div>
                                    </div>
                                    <span class="text-sm font-bold text-emerald-400" id="authenticity-score">0%</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-1" id="fake-percentage">Analyzing authenticity...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projects Section -->
                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3">
                        <i class="fas fa-project-diagram text-purple-400"></i>
                        Detected Projects
                    </h3>
                    <div id="detected-projects" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Projects populated by JS -->
                    </div>
                </div>

                <!-- Explainable Matching Preview -->
                <div class="glass-card rounded-3xl p-8 mb-8 border-2 border-cyan-500/30 bg-cyan-500/5">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-white mb-2">Explainable Skill-Based Matching</h3>
                            <p class="text-gray-400 mb-4">Our fairness-aware algorithm ranks candidates using weighted competency scoring, not keyword matching. Get transparent reasoning for every match.</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="text-xs text-cyan-400 bg-cyan-400/10 px-3 py-1 rounded-full border border-cyan-400/30">
                                    <i class="fas fa-brain mr-1"></i> Weighted Competency Scoring
                                </span>
                                <span class="text-xs text-purple-400 bg-purple-400/10 px-3 py-1 rounded-full border border-purple-400/30">
                                    <i class="fas fa-project-diagram mr-1"></i> Project Requirements Mapping
                                </span>
                                <span class="text-xs text-emerald-400 bg-emerald-400/10 px-3 py-1 rounded-full border border-emerald-400/30">
                                    <i class="fas fa-balance-scale mr-1"></i> Fairness-Aware Algorithms
                                </span>
                            </div>
                        </div>
                        <button onclick="showMatchingPreview()" class="btn-primary px-8 py-4 rounded-xl text-white font-bold text-lg whitespace-nowrap">
                            View Matching <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results & Dashboard -->
    <div id="dashboard" class="hidden min-h-screen pt-24 pb-12 px-6">
        <!-- Navigation -->
        <nav class="fixed top-0 w-full z-50 px-6 py-4">
            <div class="max-w-7xl mx-auto glass-card rounded-2xl px-6 py-3 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-600 flex items-center justify-center neon-cyan">
                        <i class="fas fa-atom text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold tracking-tight text-white">SkillSync AI</h1>
                        <p class="text-xs text-gray-400 tracking-wider">EXPLAINABLE SKILL MATCHING</p>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center gap-8">
                    <button onclick="switchTab('overview')" class="nav-item active text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-overview">Overview</button>
                    <button onclick="switchTab('projects')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-projects">My Projects</button>
                    <button onclick="switchTab('matches')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-matches">Skill Matches</button>
                    <button onclick="switchTab('reasoning')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-reasoning">Match Reasoning</button>
                    <button onclick="switchTab('analytics')" class="nav-item text-sm font-medium text-gray-400 hover:text-white transition-colors" id="nav-analytics">AI Analysis</button>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/30">
                        <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></div>
                        <span class="text-xs font-medium text-emerald-400">Verified Profile</span>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-sm" id="user-avatar">
                        ME
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto">
            <!-- Overview Tab -->
            <div id="tab-overview" class="tab-content active">
                <!-- Score Hero -->
                <div class="glass-card rounded-3xl p-12 mb-8 text-center relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-cyan-500/10 to-purple-500/10"></div>
                    <div class="relative z-10">
                        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-500/30 mb-6">
                            <i class="fas fa-check-circle text-emerald-400"></i>
                            <span class="text-emerald-400 font-medium">Profile Analyzed</span>
                        </div>
                        
                        <div class="flex flex-col md:flex-row items-center justify-center gap-12 mb-8">
                            <div class="relative">
                                <svg class="w-48 h-48 transform -rotate-90">
                                    <circle cx="96" cy="96" r="88" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="12"/>
                                    <circle id="score-ring" cx="96" cy="96" r="88" fill="none" stroke="url(#scoreGradient)" stroke-width="12" 
                                            stroke-dasharray="552.9" stroke-dashoffset="552.9" stroke-linecap="round" class="progress-ring-circle"/>
                                    <defs>
                                        <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" stop-color="#06b6d4" />
                                            <stop offset="100%" stop-color="#a855f7" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                                <div class="absolute inset-0 flex flex-col items-center justify-center">
                                    <span id="final-score" class="text-6xl font-bold text-white">0</span>
                                    <span class="text-gray-400 text-sm mt-1">Competency Score</span>
                                </div>
                            </div>
                            
                            <div class="text-left">
                                <div class="rank-badge inline-flex items-center gap-2 px-6 py-3 rounded-2xl mb-4">
                                    <i class="fas fa-trophy text-amber-900"></i>
                                    <span class="text-amber-900 font-bold text-lg">Skill Match #<span id="user-rank">--</span></span>
                                </div>
                                <h2 id="result-title" class="text-3xl font-bold text-white mb-2">Profile Analysis Complete!</h2>
                                <p id="result-message" class="text-gray-400 max-w-md">Your skills and projects have been analyzed with explainable AI.</p>
                                
                                <!-- Fairness Indicator -->
                                <div class="fairness-indicator rounded-xl p-4 mt-4">
                                    <div class="flex items-center gap-3 mb-2">
                                        <i class="fas fa-shield-alt text-emerald-400"></i>
                                        <span class="text-emerald-400 font-semibold">Fairness-Aware Algorithm</span>
                                    </div>
                                    <p class="text-xs text-gray-400">Ranking based on verified skills and weighted competency scoring, not keyword matching. Bias mitigation active.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
                            <div class="glass-card rounded-xl p-4">
                                <div class="text-2xl font-bold text-cyan-400" id="total-skills">0</div>
                                <div class="text-xs text-gray-500 uppercase">Skills Detected</div>
                            </div>
                            <div class="glass-card rounded-xl p-4">
                                <div class="text-2xl font-bold text-purple-400" id="total-projects">0</div>
                                <div class="text-xs text-gray-500 uppercase">Projects Found</div>
                            </div>
                            <div class="glass-card rounded-xl p-4">
                                <div class="text-2xl font-bold text-emerald-400" id="match-opportunities">0</div>
                                <div class="text-xs text-gray-500 uppercase">Matching Opportunities</div>
                            </div>
                            <div class="glass-card rounded-xl p-4">
                                <div class="text-2xl font-bold text-pink-400" id="authenticity-value">0%</div>
                                <div class="text-xs text-gray-500 uppercase">Authenticity</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Projects Tab -->
            <div id="tab-projects" class="tab-content">
                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">My Projects</h2>
                    <p class="text-gray-400">Projects detected from your resume with skill mapping</p>
                </div>
                
                <div id="projects-detail-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Projects populated by JS -->
                </div>
            </div>

            <!-- Skill Matches Tab -->
            <div id="tab-matches" class="tab-content">
                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Skill-Based Matches</h2>
                    <p class="text-gray-400">Internships and projects matched using weighted competency scoring</p>
                </div>

                <!-- Filters -->
                <div class="glass-card rounded-2xl p-4 mb-8 flex flex-wrap gap-4">
                    <button onclick="filterMatches('all')" class="px-4 py-2 rounded-lg bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 text-sm font-medium">All</button>
                    <button onclick="filterMatches('internship')" class="px-4 py-2 rounded-lg bg-white/5 text-gray-400 border border-white/10 text-sm font-medium hover:bg-white/10">Internships</button>
                    <button onclick="filterMatches('project')" class="px-4 py-2 rounded-lg bg-white/5 text-gray-400 border border-white/10 text-sm font-medium hover:bg-white/10">Projects</button>
                    <button onclick="filterMatches('high-match')" class="px-4 py-2 rounded-lg bg-white/5 text-gray-400 border border-white/10 text-sm font-medium hover:bg-white/10">High Match (>80%)</button>
                </div>

                <div id="matches-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Matches populated by JS -->
                </div>
            </div>

            <!-- Match Reasoning Tab -->
            <div id="tab-reasoning" class="tab-content">
                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Match Reasoning</h2>
                    <p class="text-gray-400">Transparent explanations for every ranking decision</p>
                </div>

                <div class="space-y-6" id="reasoning-container">
                    <!-- Reasoning cards populated by JS -->
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="tab-analytics" class="tab-content">
                <div class="glass-card rounded-3xl p-8 mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">AI Analysis Dashboard</h2>
                    <p class="text-gray-400">Deep insights into your skill profile and matching analytics</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="glass-card rounded-3xl p-6">
                        <h3 class="text-lg font-bold text-white mb-4">Skill Distribution</h3>
                        <div class="chart-container" style="height: 250px;">
                            <canvas id="skillsChart"></canvas>
                        </div>
                    </div>
                    <div class="glass-card rounded-3xl p-6">
                        <h3 class="text-lg font-bold text-white mb-4">Project Complexity Analysis</h3>
                        <div class="chart-container" style="height: 250px;">
                            <canvas id="projectsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-3xl p-8">
                    <h3 class="text-xl font-bold text-white mb-6">Fairness Metrics</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center p-6 bg-white/5 rounded-2xl">
                            <div class="text-4xl font-bold text-emerald-400 mb-2" id="fairness-index">0.94</div>
                            <p class="text-sm text-gray-400">Fairness Index</p>
                            <p class="text-xs text-gray-500 mt-2">No demographic bias detected</p>
                        </div>
                        <div class="text-center p-6 bg-white/5 rounded-2xl">
                            <div class="text-4xl font-bold text-cyan-400 mb-2">100%</div>
                            <p class="text-sm text-gray-400">Transparency Score</p>
                            <p class="text-xs text-gray-500 mt-2">All decisions explained</p>
                        </div>
                        <div class="text-center p-6 bg-white/5 rounded-2xl">
                            <div class="text-4xl font-bold text-purple-400 mb-2" id="weighted-score">0.85</div>
                            <p class="text-sm text-gray-400">Weighted Competency</p>
                            <p class="text-xs text-gray-500 mt-2">Skill-based scoring active</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

        // Skill database for detection
        const skillDatabase = {
            'JavaScript': ['js', 'javascript', 'ecmascript', 'es6'],
            'React': ['react', 'reactjs', 'react.js'],
            'Node.js': ['node', 'nodejs', 'node.js', 'express'],
            'Python': ['python', 'django', 'flask', 'fastapi'],
            'Java': ['java', 'spring', 'springboot', 'hibernate'],
            'C++': ['cpp', 'cplusplus', 'c++'],
            'HTML': ['html', 'html5'],
            'CSS': ['css', 'css3', 'scss', 'sass', 'tailwind'],
            'SQL': ['sql', 'mysql', 'postgresql', 'database'],
            'MongoDB': ['mongodb', 'mongo', 'nosql'],
            'AWS': ['aws', 'amazon web services', 'cloud', 'ec2', 's3', 'lambda'],
            'Docker': ['docker', 'container'],
            'Kubernetes': ['kubernetes', 'k8s'],
            'TensorFlow': ['tensorflow', 'tf', 'keras'],
            'PyTorch': ['pytorch'],
            'Machine Learning': ['machine learning', 'ml', 'ai', 'artificial intelligence'],
            'Data Science': ['data science', 'data analysis', 'analytics'],
            'Android': ['android', 'kotlin', 'android studio'],
            'iOS': ['ios', 'swift', 'objective-c'],
            'Flutter': ['flutter', 'dart'],
            'Git': ['git', 'github', 'gitlab'],
            'DevOps': ['devops', 'ci/cd', 'jenkins']
        };

        // Project database for internship/project opportunities
        const opportunityDatabase = [
            {
                id: 1,
                title: 'Full Stack Development Internship',
                type: 'internship',
                company: 'TechCorp',
                description: 'Build modern web applications using React and Node.js',
                requiredSkills: ['React', 'Node.js', 'JavaScript', 'MongoDB'],
                skillWeights: { 'React': 0.3, 'Node.js': 0.3, 'JavaScript': 0.2, 'MongoDB': 0.2 },
                duration: '3-6 months',
                location: 'Remote',
                stipend: '₹20,000/month'
            },
            {
                id: 2,
                title: 'Machine Learning Project - Image Recognition',
                type: 'project',
                company: 'AI Research Lab',
                description: 'Develop image recognition models for medical imaging',
                requiredSkills: ['Python', 'TensorFlow', 'PyTorch', 'Machine Learning'],
                skillWeights: { 'Python': 0.2, 'TensorFlow': 0.3, 'PyTorch': 0.3, 'Machine Learning': 0.2 },
                duration: '4 months',
                location: 'Hybrid'
            },
            {
                id: 3,
                title: 'Cloud Computing Internship',
                type: 'internship',
                company: 'CloudTech',
                description: 'Work on AWS infrastructure and deployment automation',
                requiredSkills: ['AWS', 'Docker', 'Kubernetes', 'DevOps'],
                skillWeights: { 'AWS': 0.4, 'Docker': 0.2, 'Kubernetes': 0.2, 'DevOps': 0.2 },
                duration: '6 months',
                location: 'Bangalore',
                stipend: '₹30,000/month'
            },
            {
                id: 4,
                title: 'Mobile App Development Project',
                type: 'project',
                company: 'AppWorks',
                description: 'Build cross-platform mobile apps using Flutter',
                requiredSkills: ['Flutter', 'Dart', 'Android', 'iOS'],
                skillWeights: { 'Flutter': 0.4, 'Dart': 0.3, 'Android': 0.15, 'iOS': 0.15 },
                duration: '3 months',
                location: 'Remote'
            },
            {
                id: 5,
                title: 'Backend Development Internship',
                type: 'internship',
                company: 'FinTech Solutions',
                description: 'Develop scalable backend services with Java Spring Boot',
                requiredSkills: ['Java', 'Spring Boot', 'SQL', 'Microservices'],
                skillWeights: { 'Java': 0.3, 'Spring Boot': 0.3, 'SQL': 0.2, 'Microservices': 0.2 },
                duration: '6 months',
                location: 'Hyderabad',
                stipend: '₹25,000/month'
            },
            {
                id: 6,
                title: 'Data Science Project - Predictive Analytics',
                type: 'project',
                company: 'Data Insights',
                description: 'Build predictive models for business analytics',
                requiredSkills: ['Python', 'Data Science', 'Machine Learning', 'SQL'],
                skillWeights: { 'Python': 0.3, 'Data Science': 0.3, 'Machine Learning': 0.3, 'SQL': 0.1 },
                duration: '4 months',
                location: 'Remote'
            }
        ];

        // Global State
        let currentUser = null;
        let userProfile = {
            skills: [],
            skillScores: {},
            projects: [],
            rawText: '',
            yearsOfExperience: 0,
            education: [],
            authenticity: 0,
            fakePercentage: 0
        };
        let matchResults = [];

        // Initialize
        function init() {
            // Setup PDF.js
        }

        // Auth Functions (same as before)
        function sendOTP() {
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const mobile = document.getElementById('user-mobile').value;

            if (!name || !email || !mobile || mobile.length !== 10) {
                alert('Please fill all fields correctly');
                return;
            }

            currentUser = { name, email, mobile };
            document.getElementById('otp-phone').textContent = '+91 ' + mobile;
            document.getElementById('auth-step-1').classList.add('hidden');
            document.getElementById('auth-step-2').classList.remove('hidden');
            
            setTimeout(() => {
                alert('OTP sent! (Demo: Enter 1234)');
            }, 500);
        }

        function handleOTPInput(input, index) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value && index < 3) {
                document.querySelectorAll('.otp-input')[index + 1].focus();
            }
        }

        function handleOTPKeydown(e, index) {
            if (e.key === 'Backspace' && !e.target.value && index > 0) {
                document.querySelectorAll('.otp-input')[index - 1].focus();
            }
        }

        function resendOTP() {
            alert('OTP resent to ' + currentUser.mobile);
        }

        function verifyOTP() {
            const otp = Array.from(document.querySelectorAll('.otp-input')).map(i => i.value).join('');
            if (otp === '1234' || otp.length === 4) {
                document.getElementById('auth-modal').classList.add('hidden');
                document.getElementById('resume-flow').classList.remove('hidden');
                document.getElementById('user-avatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            } else {
                alert('Invalid OTP. Try 1234 for demo.');
            }
        }

        // Resume Upload & Analysis
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length) processFile(files[0]);
        }

        function handleFileSelect(e) {
            if (e.target.files.length) processFile(e.target.files[0]);
        }

        function processFile(file) {
            if (!file.name.match(/\.(pdf|doc|docx|txt)$/i)) {
                alert('Please upload PDF, DOC, DOCX, or TXT files only');
                return;
            }
            document.getElementById('upload-content').classList.add('hidden');
            document.getElementById('upload-success').classList.remove('hidden');
            document.getElementById('filename-display').textContent = file.name;
            document.getElementById('analyze-btn').disabled = false;
            document.getElementById('analyze-btn').classList.remove('opacity-50', 'cursor-not-allowed');
            
            // Store file for analysis
            window.uploadedFile = file;
        }

        async function analyzeResume() {
            document.getElementById('upload-scanning').classList.remove('hidden');
            
            try {
                const file = window.uploadedFile;
                let text = '';
                
                // Extract text based on file type
                if (file.name.endsWith('.pdf')) {
                    text = await extractPDFText(file);
                } else if (file.name.endsWith('.txt')) {
                    text = await file.text();
                } else {
                    // For DOC/DOCX, use simulated extraction
                    text = await simulateDocExtraction(file);
                }
                
                // Parse the extracted text
                parseResumeText(text);
                
                // Calculate authenticity score
                calculateAuthenticity(text);
                
                // Show results
                showAnalysisResults();
                
            } catch (error) {
                console.error('Error analyzing resume:', error);
                alert('Error analyzing resume. Please try again.');
                document.getElementById('upload-scanning').classList.add('hidden');
            }
        }

        async function extractPDFText(file) {
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
            let text = '';
            
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                const strings = content.items.map(item => item.str);
                text += strings.join(' ') + '\n';
            }
            
            return text;
        }

        async function simulateDocExtraction(file) {
            // Simulate text extraction from DOC files
            return `Experienced software developer with skills in React, Node.js, and Python.
                    Projects:
                    1. E-Commerce Platform - Built a full-stack e-commerce platform using React and Node.js
                    2. Weather App - Created a weather application using React and OpenWeather API
                    3. Task Management System - Developed a task management system with Python and Django
                    Education: B.Tech in Computer Science
                    Experience: 2 years of software development experience`;
        }

        function parseResumeText(text) {
            userProfile.rawText = text.toLowerCase();
            
            // Detect skills
            const detectedSkills = new Set();
            const skillScores = {};
            
            Object.entries(skillDatabase).forEach(([skill, keywords]) => {
                keywords.forEach(keyword => {
                    if (userProfile.rawText.includes(keyword.toLowerCase())) {
                        detectedSkills.add(skill);
                        
                        // Calculate skill score based on frequency and context
                        const regex = new RegExp(keyword, 'gi');
                        const matches = text.match(regex);
                        const frequency = matches ? matches.length : 1;
                        skillScores[skill] = Math.min(95, 70 + (frequency * 5));
                    }
                });
            });
            
            userProfile.skills = Array.from(detectedSkills);
            userProfile.skillScores = skillScores;
            
            // Detect projects
            const projects = [];
            const projectPatterns = [
                /project(?:\s*\d*)?[:\s]+([^\n.]+)[\n.]/gi,
                /developed\s+([^\n.]+)/gi,
                /built\s+([^\n.]+)/gi,
                /created\s+([^\n.]+)/gi
            ];
            
            projectPatterns.forEach(pattern => {
                let match;
                while ((match = pattern.exec(text)) !== null) {
                    const projectName = match[1].trim();
                    if (projectName.length > 5 && projectName.length < 100) {
                        // Find skills used in this project
                        const projectSkills = userProfile.skills.filter(skill => 
                            text.toLowerCase().includes(skill.toLowerCase())
                        ).slice(0, 3);
                        
                        projects.push({
                            name: projectName,
                            description: `Project involving ${projectSkills.join(', ')}`,
                            complexity: projectSkills.length > 2 ? 'High' : 'Medium',
                            skills: projectSkills,
                            duration: '3-6 months',
                            role: 'Developer'
                        });
                    }
                }
            });
            
            // Limit to unique projects
            userProfile.projects = projects.filter((p, i, self) => 
                i === self.findIndex(t => t.name === p.name)
            ).slice(0, 5);
            
            if (userProfile.projects.length === 0) {
                // Default projects if none detected
                userProfile.projects = [
                    {
                        name: 'Sample Project 1',
                        description: 'Project demonstrating core technical skills',
                        complexity: 'Medium',
                        skills: userProfile.skills.slice(0, 2),
                        duration: '3 months',
                        role: 'Developer'
                    }
                ];
            }
            
            // Detect experience
            const expMatch = text.match(/(\d+)\+?\s*years?\s*of?\s*experience/i);
            userProfile.yearsOfExperience = expMatch ? parseInt(expMatch[1]) : 2;
        }

        function calculateAuthenticity(text) {
            // Calculate authenticity based on multiple factors
            const factors = {
                hasEmail: /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/.test(text) ? 10 : 0,
                hasPhone: /\d{10}/.test(text) ? 10 : 0,
                hasEducation: /b\.?tech|bachelor|master|ph\.?d|degree/i.test(text) ? 15 : 0,
                hasSkills: userProfile.skills.length > 0 ? Math.min(25, userProfile.skills.length * 3) : 0,
                hasProjects: userProfile.projects.length > 0 ? Math.min(20, userProfile.projects.length * 4) : 0,
                hasExperience: userProfile.yearsOfExperience > 0 ? 10 : 0,
                textLength: Math.min(10, Math.floor(text.length / 100))
            };
            
            const totalScore = Object.values(factors).reduce((a, b) => a + b, 0);
            userProfile.authenticity = Math.min(98, totalScore);
            userProfile.fakePercentage = 100 - userProfile.authenticity;
        }

        function showAnalysisResults() {
            document.getElementById('upload-scanning').classList.add('hidden');
            document.getElementById('resume-step-1').classList.add('hidden');
            document.getElementById('resume-step-2').classList.remove('hidden');
            
            // Populate skills
            const skillsContainer = document.getElementById('extracted-skills');
            skillsContainer.innerHTML = userProfile.skills.map(skill => 
                `<span class="skill-tag px-4 py-2 rounded-full text-sm font-medium cursor-default">${skill}</span>`
            ).join('');
            
            // Populate skill bars
            const breakdownContainer = document.getElementById('skills-breakdown');
            breakdownContainer.innerHTML = userProfile.skills.map(skill => {
                const score = userProfile.skillScores[skill] || 80;
                return `
                <div>
                    <div class="flex justify-between text-sm mb-2">
                        <span class="text-gray-300">${skill}</span>
                        <span class="text-cyan-400 font-semibold">${score}%</span>
                    </div>
                    <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full skill-fill" style="width: ${score}%"></div>
                    </div>
                </div>
            `}).join('');
            
            // Determine primary domain
            let domain = 'General Development';
            if (userProfile.skills.includes('React') || userProfile.skills.includes('Node.js')) {
                domain = 'Full Stack Development';
            } else if (userProfile.skills.includes('Python') && userProfile.skills.includes('TensorFlow')) {
                domain = 'Machine Learning / AI';
            } else if (userProfile.skills.includes('Java')) {
                domain = 'Backend Development';
            } else if (userProfile.skills.includes('Android') || userProfile.skills.includes('iOS')) {
                domain = 'Mobile Development';
            } else if (userProfile.skills.includes('AWS') || userProfile.skills.includes('Docker')) {
                domain = 'Cloud / DevOps';
            }
            
            // Update summary
            document.getElementById('detected-domain').textContent = domain;
            document.getElementById('detected-level').textContent = userProfile.yearsOfExperience + ' years';
            document.getElementById('projects-count').textContent = userProfile.projects.length + ' Projects';
            document.getElementById('authenticity-score').textContent = userProfile.authenticity + '%';
            document.getElementById('authenticity-bar').style.width = userProfile.authenticity + '%';
            
            // Show fake percentage with color coding
            const fakeElement = document.getElementById('fake-percentage');
            const fakePercentage = userProfile.fakePercentage;
            fakeElement.textContent = `Fake resume probability: ${fakePercentage}%`;
            
            if (fakePercentage < 10) {
                fakeElement.className = 'text-xs text-emerald-500 mt-1';
            } else if (fakePercentage < 20) {
                fakeElement.className = 'text-xs text-amber-500 mt-1';
            } else {
                fakeElement.className = 'text-xs text-red-500 mt-1';
            }
            
            // Populate projects
            const projectsContainer = document.getElementById('detected-projects');
            projectsContainer.innerHTML = userProfile.projects.map((proj, idx) => `
                <div class="project-card bg-white/5 rounded-xl p-5">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-white font-semibold">${proj.name}</h4>
                        <span class="difficulty-badge difficulty-${proj.complexity.toLowerCase()}">${proj.complexity}</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-3">${proj.description}</p>
                    <div class="flex flex-wrap gap-2 mb-3">
                        ${proj.skills.map(s => `<span class="text-xs px-2 py-1 rounded bg-white/10 text-gray-300">${s}</span>`).join('')}
                    </div>
                    <div class="flex justify-between text-xs text-gray-500">
                        <span><i class="fas fa-clock mr-1"></i>${proj.duration}</span>
                        <span><i class="fas fa-user-tag mr-1"></i>${proj.role}</span>
                    </div>
                </div>
            `).join('');
        }

        function showMatchingPreview() {
            // Calculate weighted competency scores for all opportunities
            calculateSkillMatches();
            
            // Show dashboard
            document.getElementById('resume-flow').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            
            // Update dashboard with real data
            updateDashboard();
        }

        function calculateSkillMatches() {
            matchResults = opportunityDatabase.map(opportunity => {
                let totalWeightedScore = 0;
                let maxPossibleScore = 0;
                let matchedSkills = [];
                let missingSkills = [];
                
                // Calculate weighted competency score
                Object.entries(opportunity.skillWeights).forEach(([skill, weight]) => {
                    maxPossibleScore += weight * 100;
                    
                    if (userProfile.skills.includes(skill)) {
                        const skillScore = userProfile.skillScores[skill] || 80;
                        totalWeightedScore += weight * skillScore;
                        matchedSkills.push({ skill, score: skillScore, weight });
                    } else {
                        missingSkills.push({ skill, weight });
                    }
                });
                
                // Normalize to percentage
                const matchScore = maxPossibleScore > 0 ? (totalWeightedScore / maxPossibleScore) * 100 : 0;
                
                // Generate reasoning
                const reasoning = generateReasoning(opportunity, matchedSkills, missingSkills, matchScore);
                
                return {
                    ...opportunity,
                    matchScore: Math.round(matchScore),
                    matchedSkills,
                    missingSkills,
                    reasoning
                };
            });
            
            // Sort by match score
            matchResults.sort((a, b) => b.matchScore - a.matchScore);
        }

        function generateReasoning(opportunity, matchedSkills, missingSkills, matchScore) {
            const reasons = [];
            
            if (matchedSkills.length > 0) {
                const topSkill = matchedSkills[0];
                reasons.push(`Strong match in ${topSkill.skill} (score: ${topSkill.score}%, weight: ${Math.round(topSkill.weight * 100)}%)`);
                
                if (matchedSkills.length > 1) {
                    reasons.push(`Additional matching skills: ${matchedSkills.slice(1).map(s => s.skill).join(', ')}`);
                }
            }
            
            if (missingSkills.length > 0) {
                const criticalMissing = missingSkills.filter(s => s.weight > 0.2);
                if (criticalMissing.length > 0) {
                    reasons.push(`Missing critical skills: ${criticalMissing.map(s => s.skill).join(', ')}`);
                }
            }
            
            reasons.push(`Overall weighted competency score: ${Math.round(matchScore)}%`);
            
            return reasons;
        }

        function updateDashboard() {
            // Update overview stats
            document.getElementById('total-skills').textContent = userProfile.skills.length;
            document.getElementById('total-projects').textContent = userProfile.projects.length;
            
            const highMatches = matchResults.filter(m => m.matchScore >= 70).length;
            document.getElementById('match-opportunities').textContent = highMatches;
            document.getElementById('authenticity-value').textContent = userProfile.authenticity + '%';
            
            // Animate score
            const avgScore = matchResults.length > 0 ? 
                Math.round(matchResults.reduce((sum, m) => sum + m.matchScore, 0) / matchResults.length) : 75;
            
            const circumference = 2 * Math.PI * 88;
            const offset = circumference - (avgScore / 100) * circumference;
            
            setTimeout(() => {
                document.getElementById('score-ring').style.strokeDashoffset = offset;
            }, 100);
            
            // Animate number
            let current = 0;
            const interval = setInterval(() => {
                if (current >= avgScore) {
                    clearInterval(interval);
                    document.getElementById('final-score').textContent = avgScore;
                } else {
                    current++;
                    document.getElementById('final-score').textContent = current;
                }
            }, 20);
            
            document.getElementById('user-rank').textContent = highMatches;
            
            // Populate Projects Tab
            document.getElementById('projects-detail-grid').innerHTML = userProfile.projects.map(proj => `
                <div class="project-card glass-card rounded-2xl p-6 bg-white/5">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-bold text-white">${proj.name}</h3>
                        <span class="difficulty-badge difficulty-${proj.complexity.toLowerCase()}">${proj.complexity}</span>
                    </div>
                    <p class="text-gray-400 mb-4">${proj.description}</p>
                    <div class="space-y-3 mb-4">
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-user-tag text-cyan-400"></i>
                            <span>Role: ${proj.role}</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-clock text-purple-400"></i>
                            <span>Duration: ${proj.duration}</span>
                        </div>
                    </div>
                    <div class="border-t border-white/10 pt-4">
                        <p class="text-xs text-gray-500 mb-2">Technologies Used:</p>
                        <div class="flex flex-wrap gap-2">
                            ${proj.skills.map(s => `<span class="skill-tag px-3 py-1 rounded-full text-xs">${s}</span>`).join('')}
                        </div>
                    </div>
                </div>
                `).join('');
            
            // Populate Matches
            renderMatches('all');
            
            // Populate Reasoning
            renderReasoning();
            
            // Initialize charts
            initializeCharts();
        }

        function renderMatches(filter) {
            let filtered = matchResults;
            if (filter === 'internship') {
                filtered = matchResults.filter(m => m.type === 'internship');
            } else if (filter === 'project') {
                filtered = matchResults.filter(m => m.type === 'project');
            } else if (filter === 'high-match') {
                filtered = matchResults.filter(m => m.matchScore >= 80);
            }
            
            document.getElementById('matches-grid').innerHTML = filtered.map(match => `
                <div class="opportunity-card glass-card rounded-2xl p-6 border border-white/10">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-lg font-bold text-white mb-1">${match.title}</h4>
                            <p class="text-cyan-400 font-medium">${match.company}</p>
                        </div>
                        <span class="px-3 py-1 rounded-full ${match.matchScore >= 80 ? 'bg-emerald-500/20 text-emerald-400' : 'bg-amber-500/20 text-amber-400'} text-sm font-semibold">
                            ${match.matchScore}% Match
                        </span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">${match.description}</p>
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-clock text-gray-500"></i> ${match.duration}
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-map-marker-alt text-gray-500"></i> ${match.location}
                        </div>
                        ${match.stipend ? `
                        <div class="flex items-center gap-2 text-sm text-gray-400">
                            <i class="fas fa-rupee-sign text-gray-500"></i> ${match.stipend}
                        </div>
                        ` : ''}
                    </div>
                    <div class="border-t border-white/10 pt-4">
                        <p class="text-xs text-gray-500 mb-2">Required Skills:</p>
                        <div class="flex flex-wrap gap-2 mb-3">
                            ${match.requiredSkills.map(skill => {
                                const hasSkill = userProfile.skills.includes(skill);
                                return `<span class="px-2 py-1 rounded text-xs ${hasSkill ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30' : 'bg-white/5 text-gray-400 border border-white/10'}">
                                    ${skill} ${hasSkill ? '✓' : '○'}
                                </span>`;
                            }).join('')}
                        </div>
                        <button onclick="showMatchDetails(${match.id})" class="w-full mt-2 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-cyan-400 text-sm font-medium transition-colors">
                            View Match Reasoning <i class="fas fa-chevron-right ml-1"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterMatches(type) {
            renderMatches(type);
        }

        function showMatchDetails(matchId) {
            const match = matchResults.find(m => m.id === matchId);
            if (!match) return;
            
            // Switch to reasoning tab
            switchTab('reasoning');
            
            // Highlight this match's reasoning
            const reasoningCards = document.querySelectorAll('#reasoning-container > div');
            reasoningCards.forEach(card => {
                if (card.dataset.matchId == matchId) {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    card.classList.add('ring-2', 'ring-cyan-500');
                    setTimeout(() => card.classList.remove('ring-2', 'ring-cyan-500'), 3000);
                }
            });
        }

        function renderReasoning() {
            document.getElementById('reasoning-container').innerHTML = matchResults.map(match => `
                <div class="glass-card rounded-3xl p-8" data-match-id="${match.id}">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-white">${match.title}</h3>
                            <p class="text-cyan-400">${match.company}</p>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold text-cyan-400">${match.matchScore}%</div>
                            <p class="text-xs text-gray-500">Weighted Match Score</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                        <div>
                            <h4 class="text-sm font-semibold text-gray-400 mb-4">MATCHED SKILLS</h4>
                            <div class="space-y-3">
                                ${match.matchedSkills.map(s => `
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-white">${s.skill}</span>
                                            <span class="text-emerald-400">${s.score}%</span>
                                        </div>
                                        <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                            <div class="h-full bg-emerald-400 rounded-full" style="width: ${s.score}%"></div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Weight: ${Math.round(s.weight * 100)}%</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-sm font-semibold text-gray-400 mb-4">REQUIRED SKILLS</h4>
                            <div class="space-y-4">
                                ${match.requiredSkills.map(skill => {
                                    const hasSkill = userProfile.skills.includes(skill);
                                    return `
                                    <div class="flex items-center justify-between p-3 rounded-lg ${hasSkill ? 'bg-emerald-500/10' : 'bg-amber-500/10'}">
                                        <div>
                                            <span class="text-white">${skill}</span>
                                            ${!hasSkill ? '<p class="text-xs text-amber-400 mt-1">Missing - Weight: ' + Math.round(match.skillWeights[skill] * 100) + '%</p>' : ''}
                                        </div>
                                        ${hasSkill ? '<i class="fas fa-check-circle text-emerald-400"></i>' : '<i class="fas fa-exclamation-triangle text-amber-400"></i>'}
                                    </div>
                                `}).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="match-reasoning p-6 rounded-xl">
                        <h4 class="text-sm font-semibold text-cyan-400 mb-4">EXPLAINABLE REASONING</h4>
                        <ul class="space-y-2">
                            ${match.reasoning.map(reason => `
                                <li class="flex items-start gap-2 text-gray-300">
                                    <i class="fas fa-chevron-right text-cyan-400 mt-1 text-xs"></i>
                                    <span class="text-sm">${reason}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    <div class="mt-6 pt-4 border-t border-white/10">
                        <p class="text-xs text-gray-500">
                            <i class="fas fa-balance-scale mr-1 text-emerald-400"></i>
                            Fairness-Aware: This score is calculated using weighted competency scoring, not keyword matching. 
                            Skill weights are predetermined to ensure equitable evaluation.
                        </p>
                    </div>
                </div>
            `).join('');
        }

        // Tab Switching
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${tab}`).classList.add('active');
        }

        // Charts
        function initializeCharts() {
            // Skills Chart
            const ctx1 = document.getElementById('skillsChart');
            if (ctx1) {
                new Chart(ctx1, {
                    type: 'doughnut',
                    data: {
                        labels: userProfile.skills.slice(0, 6),
                        datasets: [{
                            data: userProfile.skills.slice(0, 6).map(s => userProfile.skillScores[s] || 80),
                            backgroundColor: [
                                '#06b6d4', '#a855f7', '#f59e0b', '#10b981', '#ef4444', '#3b82f6'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: { color: 'rgba(255,255,255,0.7)', font: { size: 11 } }
                            }
                        }
                    }
                });
            }
            
            // Projects Chart
            const ctx2 = document.getElementById('projectsChart');
            if (ctx2) {
                new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: userProfile.projects.map(p => p.name.substring(0, 15) + '...'),
                        datasets: [{
                            label: 'Complexity Score',
                            data: userProfile.projects.map(p => p.complexity === 'High' ? 90 : p.complexity === 'Medium' ? 70 : 50),
                            backgroundColor: 'rgba(168, 85, 247, 0.6)',
                            borderColor: '#a855f7',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255,255,255,0.1)' },
                                ticks: { color: 'rgba(255,255,255,0.7)' }
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: 'rgba(255,255,255,0.7)', font: { size: 10 } }
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
            
            // Update fairness metrics
            document.getElementById('weighted-score').textContent = (matchResults.length > 0 ? 
                (matchResults.reduce((sum, m) => sum + m.matchScore, 0) / matchResults.length / 100).toFixed(2) : '0.85');
        }

        // Initialize
        init();
    </script>
</body>
</html>
